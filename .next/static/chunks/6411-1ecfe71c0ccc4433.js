"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6411],{22484:(e,r,t)=>{t.d(r,{O5:()=>n,c4:()=>s,gL:()=>o});var l=t(32309);function s(){return(0,l.c7)("__auth_token")||null}function n(e){(0,l.cT)("__auth_token",e)}function o(){let e=(0,l.c7)("__user_data");if(!e)return null;try{return JSON.parse(e)}catch(e){return console.error("Failed to parse user data:",e),null}}},35891:(e,r,t)=>{t.d(r,{Dr:()=>u,Uh:()=>c,bX:()=>h,cQ:()=>_,il:()=>p,rm:()=>d});var l=t(95155),s=t(25535),n=t(93454),o=t(58579),i=t(87242),a=t(12115);let d=(0,a.forwardRef)(function(e,r){let{portalled:t=!0,portalRef:s,...a}=e,{themeConfig:d}=(0,n.p)();return(0,l.jsx)(o.Z,{disabled:!t,container:s,children:(0,l.jsx)(i.y3,{children:(0,l.jsx)(i.rm,{ref:r,className:"ss",w:"160px",gap:1,px:0,py:1,bg:"body !important",border:"1px solid",borderColor:"d2",rounded:d.radii.container,boxShadow:"none",...a})})})}),u=(0,a.forwardRef)(function(e,r){let{children:t,...o}=e,{themeConfig:a}=(0,n.p)();return(0,l.jsx)(s.T,{px:1,children:(0,l.jsx)(i.Dr,{gap:4,ref:r,py:"8px !important",cursor:"pointer",fontSize:"md",rounded:a.radii.component,_hover:{bg:"bg.muted"},...o,children:t})})}),c=(0,a.forwardRef)(function(e,r){let{title:t,children:s,...n}=e;return(0,l.jsxs)(i.Uh,{ref:r,...n,children:[t&&(0,l.jsx)(i.QC,{fontSize:"sm",color:"fg.subtle",userSelect:"none",pl:3,lineHeight:1.2,children:t}),s]})}),p=e=>{let{children:r,...t}=e;return(0,l.jsx)(i.il,{positioning:{hideWhenDetached:!0},unmountOnExit:!1,lazyMount:!1,...t,children:r})},h=e=>(0,l.jsx)(i.bX,{...e});i.x0,i.PW,i.e7,i.C1;let _=i.cQ},40773:(e,r,t)=>{t.d(r,{A:()=>_});var l=t(38126),s=t(64254),n=t(36780),o=t(95125),i=t(22484),a=t(95704);let d=o.A.create({baseURL:a.env.NEXT_PUBLIC_API_BASE_URL,headers:{Accept:"application/json"}});async function u(){try{let e=(await o.A.post("".concat(a.env.NEXT_PUBLIC_API_BASE_URL,"/auth/refresh"),{},{withCredentials:!0})).data.accessToken;return(0,i.O5)(e),e}catch(e){return null}}d.interceptors.request.use(e=>{let r=(0,i.c4)();return r&&(e.headers.Authorization="Bearer ".concat(r)),e},e=>Promise.reject(e)),d.interceptors.response.use(e=>e,async e=>{var r;let t=e.config;if((null==(r=e.response)?void 0:r.status)===401&&!t._retry){t._retry=!0;let e=await u();if(e)return t.headers.Authorization="Bearer ".concat(e),d(t)}return Promise.reject(e)});var c=t(20063),p=t(12115),h=t(95704);function _(e){let{id:r,showLoadingToast:t=!0,showSuccessToast:o=!0,showErrorToast:i=!0,loadingMessage:a,successMessage:u,errorMessage:_,signinPath:f="/"}=e,{l:m}=(0,n.A)(),x=(0,s.A)(e=>e.removeAuth),j=(0,c.useRouter)(),v=(0,p.useRef)(null),[g,w]=(0,p.useState)({loading:!1,status:null,error:null,response:null}),{loading:b,status:A,error:S,response:E}=g,T={title:(null==a?void 0:a.title)||m.loading_default.title,description:(null==a?void 0:a.description)||m.loading_default.description},C={title:(null==u?void 0:u.title)||m.success_default.title,description:(null==u?void 0:u.description)||m.success_default.description},k=(0,p.useCallback)(e=>{w(r=>({...r,...e}))},[]);return{req:(0,p.useCallback)(async e=>{var s,n,a;let{config:u,onResolve:c}=e;try{t&&l.X.loading({id:r,title:T.title,description:T.description,action:{label:"Close",onClick:()=>{}}}),k({loading:!0,error:null,status:null}),u.url="".concat(h.env.NEXT_PUBLIC_API_BASE_URL).concat(u.url),v.current&&v.current.abort();let e=new AbortController;v.current=e,u.signal=e.signal;let n=await d(u);return k({loading:!1,status:n.status,response:n}),[200,201,304].includes(n.status)&&(null==c||null==(s=c.onSuccess)||s.call(c,n),o?l.X.update(r,{type:"success",title:C.title,description:C.description,action:{label:"Close",onClick:()=>{}}}):l.X.dismiss(r)),n}catch(o){if("ERR_CANCELED"===o.code)return void k({loading:!1});let e=null==(n=o.response)?void 0:n.status;switch(k({loading:!1,error:!0,status:e,response:o.response}),e){case 401:case 403:x(),null==j||j.push(f);break;case 503:null==j||j.push("/maintenance")}let s=(e=>{var r,t,l;let s=null==(r=e.response)?void 0:r.status,n=null==(l=e.response)||null==(t=l.data)?void 0:t.case;if("ERR_NETWORK"===e.code)return m.error_network;if(s&&(null==_?void 0:_[s]))return n&&_[s][n]?_[s][n]:_[s].default||{title:m.error_default.title,description:m.error_default.description};switch(s){case 400:if("INVALID_CREDENTIALS"===n)return m.error_signin_wrong_credentials;return m.error_400_default;case 401:return m.error_401_default;case 403:return m.error_403_default;case 404:return m.error_404_default;case 422:switch(n){case"TARGET_REQUIRED":return m.error_422_target_required;case"MINIMUM_FILE_REQUIRED":return m.error_422_file_required;case"DUPLICATE_FILENAME":return m.error_422_duplicate_file_name;case"DUPLICATE_TITLE":return m.error_422_duplicate_kmis_topic_title;case"DUPLICATE_ANSWERS":return m.error_422_duplicate_kmis_quiz_option;case"DUPLICATE_QUESTION":return m.error_422_duplicate_question;default:return m.error_422_default}case 429:return m.error_429_default;case 500:return m.error_500_default;default:return m.error_default}})(o);throw i&&(t?l.X.update(r,{type:"error",...s,action:{label:"Close",onClick:()=>{}}}):l.X.create({type:"error",...s,action:{label:"Close",onClick:()=>{}}})),null==c||null==(a=c.onError)||a.call(c,o),o}},[r,t,o,i,T,C,f,_,m,j,k]),loading:b,status:A,error:S,response:E,setReqState:w}}},50851:(e,r,t)=>{t.d(r,{E:()=>a});var l=t(95155),s=t(25535),n=t(11698),o=t(15239),i=t(12115);let a=e=>{var r;let{src:t,alt:a,onError:d,objectFit:u,objectPos:c,imageProps:p,fluid:h,fallbackSrc:_,wide:f,...m}=e,x=null!=_?_:f?"".concat(n.CS,"/no-img-wide.svg"):"".concat(n.CS,"/no-img.svg"),[j,v]=(0,i.useState)(t||x);return(0,l.jsx)(s.T,{w:"auto",justify:"center",align:"center",pos:"relative",overflow:m.rounded?"clip":"",...m,children:(0,l.jsx)(o.default,{src:j,alt:a||"image",onError:e=>{j!==x&&v(x),d&&d(e)},style:{objectFit:null!=u?u:"cover",objectPosition:null!=c?c:"center",width:"100%",height:"100%"},fill:!h,width:h?0:void 0,height:h?0:void 0,quality:80,sizes:null!=(r=null==p?void 0:p.sizes)?r:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",...p})})}},55010:(e,r,t)=>{t.d(r,{y:()=>p});var l=t(95155),s=t(25535),n=t(7579),o=t(66255),i=t(92091),a=t(26545),d=t(21258),u=t(12115),c=t(40814);let p=(0,u.forwardRef)((e,r)=>{let{name:t,onChange:p,inputValue:h,placeholder:_="••••••••",containerProps:f,invalid:m,flex:x,flexShrink:j,flexGrow:v,flexBasis:g,...w}=e,[b,A]=(0,u.useState)(!1);return(0,l.jsxs)(s.T,{w:(null==w?void 0:w.w)||"full",h:null==w?void 0:w.h,flex:x,flexShrink:j,flexGrow:v,flexBasis:g,position:"relative",display:"inline-flex",...f,children:[(0,l.jsx)(c.Y,{ref:r,name:t,placeholder:_,onChange:e=>{p&&p(e)},inputValue:h,type:b?"text":"password",pr:20,invalid:m,clearButtonProps:{right:9},...w}),(0,l.jsx)(n.o,{flexShrink:0,zIndex:2,position:"absolute",h:"full",right:1,top:0,children:(0,l.jsx)(o.K,{"aria-label":"clear input",onClick:()=>{A(e=>!e)},variant:"plain",size:"sm",color:"fg.subtle",children:(0,l.jsx)(i.I,{boxSize:5,children:b?(0,l.jsx)(a.A,{stroke:1.5}):(0,l.jsx)(d.A,{stroke:1.5})})})})]})});p.displayName="PasswordInput"},64254:(e,r,t)=>{t.d(r,{A:()=>s});var l=t(32309);let s=(0,t(25959).v)((e,r)=>({authToken:(0,l.c7)("__auth_token"),setAuthToken:r=>e(()=>({authToken:r})),verifiedAuthToken:null,setVerifiedAuthToken:r=>e(()=>((0,l.cT)("__auth_token",r||""),{verifiedAuthToken:r})),role:null,setRole:r=>e(()=>({role:r})),permissions:null,setPermissions:r=>e(()=>({permissions:r})),hasPermissions:e=>{var t;let l=null!=(t=r().permissions)?t:[];return e.every(e=>l.includes(e))},removeAuth:()=>{r().removeAuthToken(),r().removePermissions(),r().removeRole(),(0,l.Od)("__user_data"),r().setVerifiedAuthToken(null),r().setAuthToken(null)},removeAuthToken:()=>{(0,l.Od)("__auth_token"),e(()=>({authToken:null,verifiedAuthToken:null}))},removePermissions:()=>e(()=>({permissions:void 0})),removeRole:()=>e(()=>({role:void 0}))}))},78393:(e,r,t)=>{t.d(r,{E:()=>k});var l=t(95155),s=t(25535),n=t(66825),o=t(36780),i=t(93454),a=t(3370),d=t(40773),u=t(32309),c=t(2431),p=t(62030),h=t(50857),_=t(41521),f=t(12115),m=t(35068),x=t(46426),j=t(95145),v=t(98886),g=t(84234),w=t(55010),b=t(40814),A=t(86021),S=t(96307);let E=e=>{let{setStep:r,setEmail:t}=e,{l:a}=(0,o.A)(),{themeConfig:u}=(0,i.p)(),{req:c,loading:p}=(0,d.A)({id:"forgot_password"}),h=(0,_.Wx)({validateOnChange:!1,initialValues:{email:""},validationSchema:m.Ik().shape({email:m.Yj().email().required(a.msg_required_form)}),onSubmit:e=>{let l=new FormData;l.append("email",e.email),c({config:{url:"/api/send-otp",method:"POST",data:l},onResolve:{onSuccess:()=>{r(2),t(e.email)}}})}});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.Ql,{children:(0,l.jsxs)(s.T,{children:[(0,l.jsx)("form",{id:"reset_password_step_1",onSubmit:h.handleSubmit,children:(0,l.jsx)(v.D,{label:"Email",invalid:!!h.errors.email,errorText:h.errors.email,mb:4,children:(0,l.jsx)(b.Y,{name:"email",onChange:e=>{h.setFieldValue("email",e)},inputValue:h.values.email,placeholder:"example@email.com"})})}),(0,l.jsx)(g.E,{children:a.msg_reset_password_step_1})]})}),(0,l.jsxs)(n.PK,{children:[(0,l.jsx)(A.A,{}),(0,l.jsxs)(x.t,{type:"submit",form:"reset_password_step_1",colorPalette:u.colorPalette,loading:p,children:[a.recieve," OTP"]})]})]})},T=e=>{let{email:r,setOtp:t,setStep:a}=e,{l:u}=(0,o.A)(),{themeConfig:h}=(0,i.p)(),{req:f,loading:j}=(0,d.A)({id:"forgot_password"}),w=(0,_.Wx)({validateOnChange:!1,initialValues:{email:r,otp:""},validationSchema:m.Ik().shape({email:m.Yj().email().required(u.msg_required_form),otp:m.Yj().required(u.msg_required_form)}),onSubmit:e=>{let r=new FormData;r.append("email",e.email),r.append("otp",e.otp),f({config:{url:"/api/verify-otp",method:"POST",data:r},onResolve:{onSuccess:()=>{t(e.otp),a(3)}}})}});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.Ql,{children:(0,l.jsxs)(s.T,{children:[(0,l.jsx)("form",{id:"reset_password_step_2",onSubmit:w.handleSubmit,children:(0,l.jsx)(v.D,{label:"OTP",invalid:!!w.errors.otp,errorText:w.errors.otp,mb:4,children:(0,l.jsxs)(p.Yv,{colorPalette:h.colorPalette,w:"full",size:"xl",onValueChange:e=>{null==w||w.setFieldValue("otp",e.value.join(""))},children:[(0,l.jsx)(p.OC,{}),(0,l.jsx)(p.Vu,{w:"full",children:Array.from({length:6},(e,r)=>(0,l.jsx)(p.Il,{index:r,flex:1,h:"60px",fontSize:"xl",fontWeight:"bold"},r))})]})})}),(0,l.jsx)(g.E,{color:"fg.subtle",children:"".concat(u.otp_sent_to," ").concat((0,c.vA)(r))}),(0,l.jsx)(g.E,{children:u.msg_reset_password_step_2})]})}),(0,l.jsxs)(n.PK,{children:[(0,l.jsx)(A.A,{}),(0,l.jsxs)(x.t,{type:"submit",form:"reset_password_step_2",colorPalette:h.colorPalette,loading:j,children:[u.verify," OTP"]})]})]})},C=e=>{let{email:r,otp:t}=e,{l:a}=(0,o.A)(),{themeConfig:c}=(0,i.p)(),{req:p,loading:h}=(0,d.A)({id:"forgot_password"}),f=(0,_.Wx)({validateOnChange:!1,initialValues:{email:r,otp:t,password:"",password_confirmation:""},validationSchema:m.Ik().shape({email:m.Yj().email().required(a.msg_required_form),otp:m.Yj().required(a.msg_required_form),password:m.Yj().required(a.msg_required_form),password_confirmation:m.Yj().required(a.msg_required_form).oneOf([m.KR("password"),""],a.msg_password_confirmation_not_match)}),onSubmit:e=>{let r=new FormData;r.append("email",e.email),r.append("otp",e.otp),r.append("password",e.password),r.append("passwordConfirmation",e.password_confirmation),p({config:{url:"/api/reset-password",method:"POST",data:r},onResolve:{onSuccess:()=>{(0,u.aX)()}}})}});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.Ql,{children:(0,l.jsxs)(s.T,{children:[(0,l.jsxs)("form",{id:"reset_password_step_3",onSubmit:f.handleSubmit,children:[(0,l.jsx)(v.D,{label:"Password",invalid:!!f.errors.password,errorText:f.errors.password,mb:4,children:(0,l.jsx)(w.y,{onChange:e=>{f.setFieldValue("password",e)},inputValue:f.values.password})}),(0,l.jsx)(v.D,{label:a.password_confirmation,invalid:!!f.errors.password_confirmation,errorText:f.errors.password_confirmation,mb:4,children:(0,l.jsx)(w.y,{onChange:e=>{f.setFieldValue("password_confirmation",e)},inputValue:f.values.password_confirmation})})]}),(0,l.jsx)(g.E,{children:a.msg_reset_password_step_3})]})}),(0,l.jsxs)(n.PK,{children:[(0,l.jsx)(A.A,{}),(0,l.jsx)(x.t,{type:"submit",form:"reset_password_step_3",colorPalette:c.colorPalette,loading:h,disabled:!(f.values.password&&f.values.password_confirmation),children:a.save})]})]})},k=e=>{let{children:r,...t}=e,{open:o,onOpen:i,onClose:d}=(0,h.j)();(0,a.A)((0,S.t6)("reset-password"),o,i,d);let[u,c]=(0,f.useState)(""),[p,_]=(0,f.useState)(""),[m,x]=(0,f.useState)(1),v={1:(0,l.jsx)(E,{setEmail:_,setStep:x}),2:(0,l.jsx)(T,{email:p,setOtp:c,setStep:x}),3:(0,l.jsx)(C,{email:p,otp:u})};return(0,f.useEffect)(()=>{o&&x(1)},[o]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.T,{onClick:i,w:"fit",...t,children:r}),(0,l.jsx)(n.i0,{open:o,lazyLoad:!0,size:"xs",children:(0,l.jsxs)(n.L7,{children:[(0,l.jsx)(n.$Z,{children:(0,l.jsx)(j.G,{title:"Reset Password"})}),v[m]]})})]})}},84234:(e,r,t)=>{t.d(r,{E:()=>n});var l=t(95155),s=t(58226);let n=e=>{let{children:r,...t}=e;return(0,l.jsx)(s.P,{fontSize:"sm",color:"fg.subtle",...t,children:r})}},85897:(e,r,t)=>{t.d(r,{e:()=>o});var l=t(95155),s=t(91980),n=t(12115);let o=(0,n.forwardRef)(function(e,r){let{name:t,src:n,srcSet:o,loading:a,icon:d,fallback:u,children:c,...p}=e;return(0,l.jsxs)(s.Cy,{ref:r,...p,children:[(0,l.jsx)(i,{name:t,icon:d,children:u}),(0,l.jsx)(s.BK,{src:n,srcSet:o,loading:a}),c]})}),i=(0,n.forwardRef)(function(e,r){let{name:t,icon:n,children:o,...i}=e;return(0,l.jsxs)(s.q5,{ref:r,...i,children:[o,null!=t&&null==o&&(0,l.jsx)(l.Fragment,{children:function(e){let r=e.trim().split(" "),t=null!=r[0]?r[0]:"",l=r.length>1?r[r.length-1]:"";return t&&l?"".concat(t.charAt(0)).concat(l.charAt(0)):t.charAt(0)}(t)}),null==t&&null==o&&(0,l.jsx)(s.hS,{asChild:!!n,children:n})]})})},86021:(e,r,t)=>{t.d(r,{A:()=>d});var l=t(95155),s=t(32309),n=t(92091),o=t(49294),i=t(20063),a=t(46426);let d=e=>{let{children:r,iconButton:t=!1,backPath:d,onBack:u,...c}=e,p=(0,i.useRouter)();function h(){d?p.push(d):(0,s.aX)(),null==u||u()}return(p.prefetch(d||""),t)?(0,l.jsx)(a.t,{iconButton:!0,variant:"ghost",rounded:"full",onClick:h,size:"xs",...c,children:(0,l.jsx)(n.I,{boxSize:5,children:(0,l.jsx)(o.A,{stroke:1.5})})}):(0,l.jsx)(a.t,{variant:"outline",onClick:h,...c,children:r||"Close"})}},87936:(e,r,t)=>{t.d(r,{T:()=>d});var l=t(95155),s=t(12115),n=t(50851),o=t(11698),i=t(76150);let a=[{src:"".concat(o.$Q,"/atrbpn-logo.png"),alt:"ATR BPN Logo"},{src:"".concat(o.$Q,"/unep-logo.png"),alt:"UNEP Logo"},{src:"".concat(o.$Q,"/gef-logo.png"),alt:"GEF Logo"}],d=e=>{let{compact:r,...t}=e,[o,d]=(0,s.useState)(0);if((0,s.useEffect)(()=>{if(!r)return;let e=setInterval(()=>{d(e=>(e+1)%a.length)},3e3);return()=>clearInterval(e)},[r]),r){let e=(null==t?void 0:t.h)||"30px";return(0,l.jsx)(i.z,{...t,position:"relative",justify:"center",align:"center",aspectRatio:1,h:e,w:"auto",overflow:"hidden",children:a.map((r,t)=>(0,l.jsx)(n.E,{src:r.src,alt:r.alt,w:"auto",h:e,aspectRatio:1,objectFit:"contain",style:{position:"absolute",top:0,left:"50%",transform:"translateX(-50%)",opacity:+(o===t),transition:"opacity 0.6s ease-in-out"}},r.alt))})}return(0,l.jsx)(i.z,{...t,children:a.map((e,r)=>(0,l.jsx)(n.E,{src:e.src,alt:e.alt,w:"auto",h:(null==t?void 0:t.h)||"30px",aspectRatio:1,objectFit:"contain",ml:0===r?"0":"6px"},e.alt))})}},88121:(e,r,t)=>{t.d(r,{c:()=>n});var l=t(95155),s=t(8898);let n=e=>{let{dir:r="horizontal",...t}=e;return"horizontal"===r?(0,l.jsx)(s.a,{w:"full",h:"1px",bg:"d2",...t}):(0,l.jsx)(s.a,{w:"1px",h:"full",bg:"d2",...t})}},98886:(e,r,t)=>{t.d(r,{D:()=>i});var l=t(95155),s=t(36780),n=t(14200),o=t(54515);let i=(0,t(12115).forwardRef)(function(e,r){let{label:t,children:i,helperText:a,errorText:d,optionalText:u,optional:c,...p}=e,{l:h}=(0,s.A)();return(0,l.jsxs)(n.XO,{ref:r,gap:2,...p,children:[t&&(0,l.jsxs)(n.dh,{fontSize:"md",children:[t,c&&(0,l.jsx)(o.Ex,{colorScheme:"gray",color:"fg.muted",children:h.optional.toLocaleLowerCase()}),(0,l.jsx)(n.tR,{fallback:u})]}),i,a&&(0,l.jsx)(n.sp,{children:a}),d&&(0,l.jsx)(n.wp,{children:d})]})})}}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8902],{20243:(e,t,r)=>{r.d(t,{E:()=>o});var n=r(95155),l=r(93454),a=r(19971);let o=e=>{let{...t}=e,{themeConfig:r}=(0,l.p)();return(0,n.jsx)(a.EA,{rounded:r.radii.component,...t})}},22484:(e,t,r)=>{r.d(t,{O5:()=>a,c4:()=>l,gL:()=>o});var n=r(32309);function l(){return(0,n.c7)("__auth_token")||null}function a(e){(0,n.cT)("__auth_token",e)}function o(){let e=(0,n.c7)("__user_data");if(!e)return null;try{return JSON.parse(e)}catch(e){return console.error("Failed to parse user data:",e),null}}},35189:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(12115),l=r(40773),a=r(93885),o=r(79310);let s=e=>{let{initialData:t,dummyData:r,payload:s,params:i,url:u,method:c,dependencies:d=[],conditions:_=!0,noRt:p=!1,initialPage:f=1,initialLimit:h=15,intialOffset:v=0,dataResource:A=!0,withLoadingBar:m=!0}=e,g=(0,o.z)(e=>e.setLoadingBar),[k,T]=(0,n.useState)(r||t),[E,x]=(0,n.useState)(!0),[b,w]=(0,n.useState)(!1),[y,R]=(0,n.useState)(f),[C,j]=(0,n.useState)(h),[I,S]=(0,n.useState)(v),[P,L]=(0,n.useState)(void 0),{rt:N}=(0,a.A)(),{req:D,response:U,loading:O,error:q,status:z}=(0,l.A)({id:u||"data-state",showLoadingToast:!1,showErrorToast:!0,showSuccessToast:!1}),B={limit:C,page:y,...s},W={limit:C,page:y,...i},M={url:u,method:c,data:B,params:A?W:null},X=(0,n.useRef)(null),F=(0,n.useRef)(null);function Q(){if(!u)return;F.current=u;let e=new AbortController;X.current=e;let t={...M,signal:e.signal};Promise.resolve().then(()=>{F.current===u&&D({config:t,onResolve:{onSuccess:e=>{var t,n,l,a,o,s,i;L(null==e||null==(n=e.data)||null==(t=n.data)?void 0:t.pagination),x(!1),r?T(r):T(A?Array.isArray(null==e||null==(l=e.data)?void 0:l.data)?null==e||null==(a=e.data)?void 0:a.data:null==e||null==(s=e.data)||null==(o=s.data)?void 0:o.data:null==e||null==(i=e.data)?void 0:i.data)},onError:()=>{x(!1)}}})})}return(0,n.useEffect)(()=>{if(!_||!u)return;let e=setTimeout(()=>{Q()},50);return()=>{clearTimeout(e),X.current&&X.current.abort()}},[_,u,y,C,...p?[]:[N],...d||[]]),(0,n.useEffect)(()=>{j(h)},[h]),(0,n.useEffect)(()=>{u||x(!1)},[u]),(0,n.useEffect)(()=>{m&&g(O)},[O]),{makeRequest:Q,onRetry:function(){x(!0),Q()},data:k,setData:T,initialLoading:E,setInitialLoading:x,loading:O,error:q,loadMore:function(){w(!0),D({config:{...M},onResolve:{onSuccess:e=>{var t,r,n;T(k?[...k,...null==e||null==(t=e.data)?void 0:t.data]:null==e||null==(r=e.data)?void 0:r.data),L(null==e||null==(n=e.data)?void 0:n.pagination),w(!1)}}})},loadingLoadMore:b,setLoadingLoadMore:w,pagination:P,page:y,setPage:R,limit:C,setLimit:j,offset:I,setOffset:S,response:U,status:z}}},40773:(e,t,r)=>{r.d(t,{A:()=>_});var n=r(38126),l=r(64254),a=r(36780),o=r(95125),s=r(22484);let i=o.A.create({baseURL:"https://rimba.webgis.app/api",headers:{Accept:"application/json"}});async function u(){try{let e=(await o.A.post("".concat("https://rimba.webgis.app/api","/auth/refresh"),{},{withCredentials:!0})).data.accessToken;return(0,s.O5)(e),e}catch(e){return null}}i.interceptors.request.use(e=>{let t=(0,s.c4)();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,async e=>{var t;let r=e.config;if((null==(t=e.response)?void 0:t.status)===401&&!r._retry){r._retry=!0;let e=await u();if(e)return r.headers.Authorization="Bearer ".concat(e),i(r)}return Promise.reject(e)});var c=r(20063),d=r(12115);function _(e){let{id:t,showLoadingToast:r=!0,showSuccessToast:o=!0,showErrorToast:s=!0,loadingMessage:u,successMessage:_,errorMessage:p,signinPath:f="/"}=e,{l:h}=(0,a.A)(),v=(0,l.A)(e=>e.removeAuth),A=(0,c.useRouter)(),m=(0,d.useRef)(null),[g,k]=(0,d.useState)({loading:!1,status:null,error:null,response:null}),{loading:T,status:E,error:x,response:b}=g,w={title:(null==u?void 0:u.title)||h.loading_default.title,description:(null==u?void 0:u.description)||h.loading_default.description},y={title:(null==_?void 0:_.title)||h.success_default.title,description:(null==_?void 0:_.description)||h.success_default.description},R=(0,d.useCallback)(e=>{k(t=>({...t,...e}))},[]);return{req:(0,d.useCallback)(async e=>{var l,a,u;let{config:c,onResolve:d}=e;try{r&&n.X.loading({id:t,title:w.title,description:w.description,action:{label:"Close",onClick:()=>{}}}),R({loading:!0,error:null,status:null}),c.url="".concat("https://rimba.webgis.app/api").concat(c.url),m.current&&m.current.abort();let e=new AbortController;m.current=e,c.signal=e.signal;let a=await i(c);return R({loading:!1,status:a.status,response:a}),[200,201,304].includes(a.status)&&(null==d||null==(l=d.onSuccess)||l.call(d,a),o?n.X.update(t,{type:"success",title:y.title,description:y.description,action:{label:"Close",onClick:()=>{}}}):n.X.dismiss(t)),a}catch(o){if("ERR_CANCELED"===o.code)return void R({loading:!1});let e=null==(a=o.response)?void 0:a.status;switch(R({loading:!1,error:!0,status:e,response:o.response}),e){case 401:case 403:v(),null==A||A.push(f);break;case 503:null==A||A.push("/maintenance")}let l=(e=>{var t,r,n;let l=null==(t=e.response)?void 0:t.status,a=null==(n=e.response)||null==(r=n.data)?void 0:r.case;if("ERR_NETWORK"===e.code)return h.error_network;if(l&&(null==p?void 0:p[l]))return a&&p[l][a]?p[l][a]:p[l].default||{title:h.error_default.title,description:h.error_default.description};switch(l){case 400:if("INVALID_CREDENTIALS"===a)return h.error_signin_wrong_credentials;return h.error_400_default;case 401:return h.error_401_default;case 403:return h.error_403_default;case 404:return h.error_404_default;case 422:switch(a){case"TARGET_REQUIRED":return h.error_422_target_required;case"MINIMUM_FILE_REQUIRED":return h.error_422_file_required;case"DUPLICATE_FILENAME":return h.error_422_duplicate_file_name;case"DUPLICATE_TITLE":return h.error_422_duplicate_kmis_topic_title;case"DUPLICATE_ANSWERS":return h.error_422_duplicate_kmis_quiz_option;case"DUPLICATE_QUESTION":return h.error_422_duplicate_question;default:return h.error_422_default}case 429:return h.error_429_default;case 500:return h.error_500_default;default:return h.error_default}})(o);throw s&&(r?n.X.update(t,{type:"error",...l,action:{label:"Close",onClick:()=>{}}}):n.X.create({type:"error",...l,action:{label:"Close",onClick:()=>{}}})),null==d||null==(u=d.onError)||u.call(d,o),o}},[t,r,o,s,w,y,f,p,h,A,R]),loading:T,status:E,error:x,response:b,setReqState:k}}},50588:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(95155),l=r(25535),a=r(52012),o=r(36780),s=r(92091),i=r(53360),u=r(58832);function c(e){let{title:t,description:r,icon:c,children:d,..._}=e,{l:p}=(0,o.A)();return(0,n.jsxs)(l.T,{w:"fit",m:"auto",align:"center",minH:a.Y6,justify:"center",gap:4,..._,children:[(0,n.jsx)(u.A,{icon:(0,n.jsx)(s.I,{mb:t?-2:0,children:c||(0,n.jsx)(i.A,{stroke:1.8})}),title:null!=t?t:p.alert_no_data.title,description:null!=r?r:p.alert_no_data.description,maxW:"300px"}),d]})}},58832:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(95155),l=r(58226),a=r(59964),o=r(92091),s=r(53360);let i=e=>{let{icon:t,title:r,description:i,children:u,...c}=e,d="string"==typeof r,_="string"==typeof i;return(0,n.jsxs)(a.T,{gap:1,p:4,...c,children:[(0,n.jsx)(o.I,{mb:2,color:"fg.subtle",boxSize:9,children:t||(0,n.jsx)(s.A,{stroke:1.8})}),d&&(0,n.jsx)(l.P,{textAlign:"center",fontWeight:"semibold",children:r}),!d&&r,_&&(0,n.jsx)(l.P,{maxW:"300px",textAlign:"center",color:"fg.subtle",children:i}),!_&&i,u]})}},64254:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(32309);let l=(0,r(25959).v)((e,t)=>({authToken:(0,n.c7)("__auth_token"),setAuthToken:t=>e(()=>({authToken:t})),verifiedAuthToken:null,setVerifiedAuthToken:t=>e(()=>((0,n.cT)("__auth_token",t||""),{verifiedAuthToken:t})),role:null,setRole:t=>e(()=>({role:t})),permissions:null,setPermissions:t=>e(()=>({permissions:t})),hasPermissions:e=>{var r;let n=null!=(r=t().permissions)?r:[];return e.every(e=>n.includes(e))},removeAuth:()=>{t().removeAuthToken(),t().removePermissions(),t().removeRole(),(0,n.Od)("__user_data"),t().setVerifiedAuthToken(null),t().setAuthToken(null)},removeAuthToken:()=>{(0,n.Od)("__auth_token"),e(()=>({authToken:null,verifiedAuthToken:null}))},removePermissions:()=>e(()=>({permissions:void 0})),removeRole:()=>e(()=>({role:void 0}))}))},65609:(e,t,r)=>{r.d(t,{L:()=>s,T:()=>i});var n=r(95155),l=r(25535),a=r(93454),o=r(12115);let s=(0,o.forwardRef)((e,t)=>{let{children:r,...a}=e;return(0,n.jsx)(l.T,{ref:t,flex:1,gap:4,p:[2,null,4],pt:"0 !important",overflow:"auto",...a,children:r})});s.displayName="PageContainer";let i=(0,o.forwardRef)((e,t)=>{let{children:r,...o}=e,{themeConfig:s}=(0,a.p)();return(0,n.jsx)(l.T,{ref:t,flex:1,bg:"body",rounded:s.radii.container,overflow:"auto",...o,children:r})});i.displayName="PageContent"},77141:(e,t,r)=>{r.d(t,{A:()=>_});var n=r(95155),l=r(46426),a=r(25535),o=r(58832),s=r(52012),i=r(36780),u=r(93454),c=r(92091),d=r(44748);function _(e){let{title:t,description:r,icon:_,onRetry:p,children:f,...h}=e,{themeConfig:v}=(0,u.p)(),{l:A}=(0,i.A)();return(0,n.jsxs)(a.T,{w:"fit",m:"auto",minH:s.Y6,justify:"center",...h,children:[(0,n.jsx)(o.A,{icon:(0,n.jsx)(c.I,{mb:t?-2:0,children:_||(0,n.jsx)(d.A,{stroke:1.8})}),title:null!=t?t:A.alert_retry.title,description:null!=r?r:A.alert_retry.description,maxW:"300px"}),(0,n.jsx)(l.t,{w:"120px",className:"clicky",variant:"outline",colorPalette:v.colorPalette,mx:"auto",onClick:p,children:A.retry}),f]})}},79310:(e,t,r)=>{r.d(t,{z:()=>n});let n=(0,r(25959).v)(e=>({loadingBar:!1,setLoadingBar:t=>e({loadingBar:t})}))},93885:(e,t,r)=>{r.d(t,{A:()=>n});let n=(0,r(25959).v)((e,t)=>({rt:!1,setRt:r=>{"function"==typeof r?e({rt:r(t().rt)}):e({rt:r})}}))}}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[456],{22484:(e,r,t)=>{t.d(r,{O5:()=>o,c4:()=>l,gL:()=>i});var n=t(32309);function l(){return(0,n.c7)("__auth_token")||null}function o(e){(0,n.cT)("__auth_token",e)}function i(){let e=(0,n.c7)("__user_data");if(!e)return null;try{return JSON.parse(e)}catch(e){return console.error("Failed to parse user data:",e),null}}},35891:(e,r,t)=>{t.d(r,{Dr:()=>c,Uh:()=>d,bX:()=>f,cQ:()=>_,il:()=>p,rm:()=>u});var n=t(95155),l=t(25535),o=t(93454),i=t(58579),a=t(87242),s=t(12115);let u=(0,s.forwardRef)(function(e,r){let{portalled:t=!0,portalRef:l,...s}=e,{themeConfig:u}=(0,o.p)();return(0,n.jsx)(i.Z,{disabled:!t,container:l,children:(0,n.jsx)(a.y3,{children:(0,n.jsx)(a.rm,{ref:r,className:"ss",w:"160px",gap:1,px:0,py:1,bg:"body !important",border:"1px solid",borderColor:"d2",rounded:u.radii.container,boxShadow:"none",...s})})})}),c=(0,s.forwardRef)(function(e,r){let{children:t,...i}=e,{themeConfig:s}=(0,o.p)();return(0,n.jsx)(l.T,{px:1,children:(0,n.jsx)(a.Dr,{gap:4,ref:r,py:"8px !important",cursor:"pointer",fontSize:"md",rounded:s.radii.component,_hover:{bg:"bg.muted"},...i,children:t})})}),d=(0,s.forwardRef)(function(e,r){let{title:t,children:l,...o}=e;return(0,n.jsxs)(a.Uh,{ref:r,...o,children:[t&&(0,n.jsx)(a.QC,{fontSize:"sm",color:"fg.subtle",userSelect:"none",pl:3,lineHeight:1.2,children:t}),l]})}),p=e=>{let{children:r,...t}=e;return(0,n.jsx)(a.il,{positioning:{hideWhenDetached:!0},unmountOnExit:!1,lazyMount:!1,...t,children:r})},f=e=>(0,n.jsx)(a.bX,{...e});a.x0,a.PW,a.e7,a.C1;let _=a.cQ},40773:(e,r,t)=>{t.d(r,{A:()=>p});var n=t(38126),l=t(64254),o=t(36780),i=t(95125),a=t(22484);let s=i.A.create({baseURL:"https://rimba.webgis.app/api",headers:{Accept:"application/json"}});async function u(){try{let e=(await i.A.post("".concat("https://rimba.webgis.app/api","/auth/refresh"),{},{withCredentials:!0})).data.accessToken;return(0,a.O5)(e),e}catch(e){return null}}s.interceptors.request.use(e=>{let r=(0,a.c4)();return r&&(e.headers.Authorization="Bearer ".concat(r)),e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,async e=>{var r;let t=e.config;if((null==(r=e.response)?void 0:r.status)===401&&!t._retry){t._retry=!0;let e=await u();if(e)return t.headers.Authorization="Bearer ".concat(e),s(t)}return Promise.reject(e)});var c=t(20063),d=t(12115);function p(e){let{id:r,showLoadingToast:t=!0,showSuccessToast:i=!0,showErrorToast:a=!0,loadingMessage:u,successMessage:p,errorMessage:f,signinPath:_="/"}=e,{l:h}=(0,o.A)(),m=(0,l.A)(e=>e.removeAuth),b=(0,c.useRouter)(),v=(0,d.useRef)(null),[x,k]=(0,d.useState)({loading:!1,status:null,error:null,response:null}),{loading:g,status:A,error:w,response:C}=x,T={title:(null==u?void 0:u.title)||h.loading_default.title,description:(null==u?void 0:u.description)||h.loading_default.description},E={title:(null==p?void 0:p.title)||h.success_default.title,description:(null==p?void 0:p.description)||h.success_default.description},y=(0,d.useCallback)(e=>{k(r=>({...r,...e}))},[]);return{req:(0,d.useCallback)(async e=>{var l,o,u;let{config:c,onResolve:d}=e;try{t&&n.X.loading({id:r,title:T.title,description:T.description,action:{label:"Close",onClick:()=>{}}}),y({loading:!0,error:null,status:null}),c.url="".concat("https://rimba.webgis.app/api").concat(c.url),v.current&&v.current.abort();let e=new AbortController;v.current=e,c.signal=e.signal;let o=await s(c);return y({loading:!1,status:o.status,response:o}),[200,201,304].includes(o.status)&&(null==d||null==(l=d.onSuccess)||l.call(d,o),i?n.X.update(r,{type:"success",title:E.title,description:E.description,action:{label:"Close",onClick:()=>{}}}):n.X.dismiss(r)),o}catch(i){if("ERR_CANCELED"===i.code)return void y({loading:!1});let e=null==(o=i.response)?void 0:o.status;switch(y({loading:!1,error:!0,status:e,response:i.response}),e){case 401:case 403:m(),null==b||b.push(_);break;case 503:null==b||b.push("/maintenance")}let l=(e=>{var r,t,n;let l=null==(r=e.response)?void 0:r.status,o=null==(n=e.response)||null==(t=n.data)?void 0:t.case;if("ERR_NETWORK"===e.code)return h.error_network;if(l&&(null==f?void 0:f[l]))return o&&f[l][o]?f[l][o]:f[l].default||{title:h.error_default.title,description:h.error_default.description};switch(l){case 400:if("INVALID_CREDENTIALS"===o)return h.error_signin_wrong_credentials;return h.error_400_default;case 401:return h.error_401_default;case 403:return h.error_403_default;case 404:return h.error_404_default;case 422:switch(o){case"TARGET_REQUIRED":return h.error_422_target_required;case"MINIMUM_FILE_REQUIRED":return h.error_422_file_required;case"DUPLICATE_FILENAME":return h.error_422_duplicate_file_name;case"DUPLICATE_TITLE":return h.error_422_duplicate_kmis_topic_title;case"DUPLICATE_ANSWERS":return h.error_422_duplicate_kmis_quiz_option;case"DUPLICATE_QUESTION":return h.error_422_duplicate_question;default:return h.error_422_default}case 429:return h.error_429_default;case 500:return h.error_500_default;default:return h.error_default}})(i);throw a&&(t?n.X.update(r,{type:"error",...l,action:{label:"Close",onClick:()=>{}}}):n.X.create({type:"error",...l,action:{label:"Close",onClick:()=>{}}})),null==d||null==(u=d.onError)||u.call(d,i),i}},[r,t,i,a,T,E,_,f,h,b,y]),loading:g,status:A,error:w,response:C,setReqState:k}}},40814:(e,r,t)=>{t.d(r,{Y:()=>k});var n=t(3648),l=t(95155),o=t(25535),i=t(93454),a=t(12115),s=t(98781),u=t(45308),c=t(7579),d=t(66255),p=t(92091),f=t(10225),_=t(2186),h=t(3373),m=t(38126),b=t(36780),v=t(2431);function x(){let e=(0,n._)(["\n      input:-webkit-autofill,\n      input:-webkit-autofill:hover,\n      input:-webkit-autofill:focus,\n      input:-webkit-autofill:active {\n        -webkit-box-shadow: 0 0 0 30px "," inset !important;\n        box-shadow: 0 0 0 30px "," inset !important;\n      }\n    "]);return x=function(){return e},e}let k=(0,a.forwardRef)((e,r)=>{let{name:t,onChange:n,inputValue:k,placeholder:g="Input text",containerProps:A,invalid:w,clearable:C=!0,clearButtonProps:T,flex:E,flexShrink:y,flexGrow:j,flexBasis:R,maxChar:I=255,...S}=e,{l:z}=(0,b.A)(),{colorMode:L}=(0,h.G6)(),{themeConfig:N}=(0,i.p)(),D=(0,s.f)(),P=(0,a.useRef)(!0),U=(0,a.useRef)(null),X=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.useCallback)(e=>{r.forEach(r=>{r&&("function"==typeof r?r(e):r.current=e)})},[r])}(r,U),O=w||(null==D?void 0:D.invalid),q=null==D?void 0:D.disabled,Q="light"===L?"#fff":"var(--dark)",M=(0,f.AH)(x(),Q,Q);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(f.mL,{styles:M}),(0,l.jsxs)(o.T,{position:"relative",w:(null==S?void 0:S.w)||"full",h:null==S?void 0:S.h,flex:E,flexShrink:y,flexGrow:j,flexBasis:R,display:"inline-flex",overflow:"visible",...A,children:[(0,l.jsx)(u.p,{ref:X,name:t,onChange:e=>{let r=e.target.value;null!==I&&r.length>I&&(r=r.slice(0,I),m.X.create({title:z.info_max_char_reached.title,description:(0,v.zl)(z.info_max_char_reached.description,{maxChar:I})})),null==n||n(r),P.current&&(P.current=!1)},value:k,_placeholder:{fontSize:"md"},placeholder:g,borderColor:O?"border.error":"border.muted",fontSize:"md",fontWeight:"medium",outline:"none !important",_focus:{borderColor:N.primaryColor},rounded:N.radii.component,autoComplete:"off",transition:"200ms",color:"text",pl:4,pr:C?10:"",...S}),k&&C&&!q&&(0,l.jsx)(c.o,{flexShrink:0,zIndex:2,position:"absolute",h:"full",right:1,top:0,...T,children:(0,l.jsx)(d.K,{"aria-label":"clear input",onClick:()=>{var e;null==n||n(""),null==(e=U.current)||e.focus()},variant:"plain",size:"sm",color:"fg.subtle",children:(0,l.jsx)(p.I,{boxSize:"18px",children:(0,l.jsx)(_.A,{})})})})]})]})});k.displayName="StringInput"},55803:(e,r,t)=>{t.d(r,{HI:()=>u,P3:()=>c,rJ:()=>s});var n=t(95155),l=t(93454),o=t(8898),i=t(92091),a=t(55048);let s=e=>{let{themeConfig:r}=(0,l.p)();return(0,n.jsx)(o.a,{w:"3px",h:"12px",bg:r.primaryColor,rounded:"full",pos:"absolute",top:"50%",left:"-1.5px",transform:"translateY(-50%)",...e})},u=e=>{let{themeConfig:r}=(0,l.p)();return(0,n.jsx)(o.a,{w:"12px",h:"3px",bg:r.primaryColor,rounded:"full",pos:"absolute",bottom:-2,left:"50%",transform:"translateX(-50%)",...e})},c=e=>{let{children:r,...t}=e,{themeConfig:o}=(0,l.p)();return(0,n.jsx)(i.I,{color:o.primaryColor,boxSize:2,...t,children:r||(0,n.jsx)(a.A,{})})}},64254:(e,r,t)=>{t.d(r,{A:()=>l});var n=t(32309);let l=(0,t(25959).v)((e,r)=>({authToken:(0,n.c7)("__auth_token"),setAuthToken:r=>e(()=>({authToken:r})),verifiedAuthToken:null,setVerifiedAuthToken:r=>e(()=>((0,n.cT)("__auth_token",r||""),{verifiedAuthToken:r})),role:null,setRole:r=>e(()=>({role:r})),permissions:null,setPermissions:r=>e(()=>({permissions:r})),hasPermissions:e=>{var t;let n=null!=(t=r().permissions)?t:[];return e.every(e=>n.includes(e))},removeAuth:()=>{r().removeAuthToken(),r().removePermissions(),r().removeRole(),(0,n.Od)("__user_data"),r().setVerifiedAuthToken(null),r().setAuthToken(null)},removeAuthToken:()=>{(0,n.Od)("__auth_token"),e(()=>({authToken:null,verifiedAuthToken:null}))},removePermissions:()=>e(()=>({permissions:void 0})),removeRole:()=>e(()=>({role:void 0}))}))}}]);
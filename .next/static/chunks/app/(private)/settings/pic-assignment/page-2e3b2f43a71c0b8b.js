(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8124],{5289:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>et});var s=l(95155),i=l(46426),a=l(25535),n=l(66825),r=l(95145),d=l(98886),c=l(35891),o=l(571),u=l(40814),h=l(46767),x=l(86021),j=l(66168),m=l(98064),p=l(63041),v=l(48930),g=l(50588),P=l(77141),f=l(38752),C=l(65609),A=l(70637),I=l(3455),b=l(36780),w=l(93885),y=l(93454),z=l(3370),S=l(35189),k=l(40773),T=l(60439),_=l(32309),E=l(96307),V=l(46977),F=l(2431),O=l(7791),R=l(50857),D=l(92091),L=l(76150),Y=l(45554),H=l(78225),q=l(62251),K=l(61456),X=l(89712),Z=l(41521),G=l(20063),N=l(12115),Q=l(35068);let B="/api/master-data/pic-division",J="monev_pic_assignment",M=e=>{var t;let{picDivision:l,...a}=e,{open:d,onOpen:c,onClose:o}=(0,R.j)();return(0,z.A)((0,E.t6)("PIC-".concat(null==l?void 0:l.id)),d,c,o),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.t,{onClick:c,size:"sm",variant:"ghost",...a,children:[(0,s.jsx)(D.I,{boxSize:5,children:(0,s.jsx)(H.A,{stroke:1.5})}),"PIC"]}),(0,s.jsx)(n.i0,{open:d,lazyLoad:!0,size:"xs",children:(0,s.jsxs)(n.L7,{children:[(0,s.jsx)(n.$Z,{children:(0,s.jsx)(r.G,{title:"PIC"})}),(0,s.jsxs)(n.Ql,{children:[(0,T.VP)(l.userPic)&&(0,s.jsx)(g.A,{}),null==(t=l.userPic)?void 0:t.map(e=>(0,s.jsx)(f.X,{user:e},e.id))]}),(0,s.jsx)(n.PK,{children:(0,s.jsx)(x.A,{})})]})})]})},U=e=>{let{children:t,content:l,...i}=e;return(0,s.jsx)(h.m,{content:l,positioning:{placement:"right"},...i,children:t})},$=e=>{let{filter:t,setFilter:l,...i}=e;return(0,s.jsx)(L.z,{p:3,...i,children:(0,s.jsx)(o.A,{inputValue:t.search,onChange:e=>{l({...t,search:e})}})})},W=e=>{let t="".concat(J,"_update"),{data:l,routeTitle:o}=e,{l:h}=(0,b.A)(),{themeConfig:x}=(0,y.p)(),j=(0,w.A)(e=>e.setRt),{open:m,onOpen:p,onClose:v}=(0,R.j)();(0,z.A)((0,E.t6)("".concat(t,"-").concat(null==l?void 0:l.id)),m,p,v);let{req:g,loading:P}=(0,k.A)({id:t,loadingMessage:{title:(0,F.ZH)("Edit ".concat(o))},successMessage:{title:(0,F.ZH)("Edit ".concat(o," ").concat(h.successful))}}),f=(0,Z.Wx)({validateOnChange:!1,initialValues:{PICs:[]},validationSchema:Q.Ik().shape({PICs:Q.YO()}),onSubmit:e=>{(0,_.aX)();let t={userPic:e.PICs};g({config:{url:"".concat(B,"/assign/").concat(l.id),method:"PATCH",data:t},onResolve:{onSuccess:()=>{j(e=>!e)}}})}});return(0,N.useEffect)(()=>{f.setValues({PICs:(0,T.VP)(l.userPic)?[{name:"",email:""}]:l.userPic})},[m,l]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(U,{content:"Edit",children:(0,s.jsxs)(c.Dr,{value:"edit",onClick:p,children:["".concat(h.manage," PIC"),(0,s.jsx)(D.I,{boxSize:"18px",ml:"auto",children:(0,s.jsx)(q.A,{stroke:1.5})})]})}),(0,s.jsx)(n.i0,{open:m,lazyLoad:!0,size:"md",children:(0,s.jsxs)(n.L7,{children:[(0,s.jsx)(n.$Z,{children:(0,s.jsx)(r.G,{title:"".concat(h.manage," PIC")})}),(0,s.jsx)(n.Ql,{children:(0,s.jsx)("form",{id:t,onSubmit:f.handleSubmit,children:(0,s.jsx)(Y.Rs,{disabled:P,children:(0,s.jsx)(d.D,{label:"PIC",invalid:!!f.errors.PICs,errorText:f.errors.PICs,children:(0,s.jsxs)(a.T,{gap:2,children:[f.values.PICs.map((e,t)=>(0,s.jsxs)(L.z,{children:[(0,s.jsx)(u.Y,{inputValue:null==e?void 0:e.name,onChange:e=>{let l=[...f.values.PICs];l[t].name=e,f.setFieldValue("PICs",l)},flex:3,placeholder:h.name}),(0,s.jsx)(u.Y,{inputValue:null==e?void 0:e.email,onChange:e=>{let l=[...f.values.PICs];l[t].email=e,f.setFieldValue("PICs",l)},flex:2,placeholder:"Email"}),(0,s.jsx)(i.t,{iconButton:!0,variant:"outline",size:"md",onClick:()=>{f.setFieldValue("PICs",[...f.values.PICs.filter((e,l)=>t!==l)])},children:(0,s.jsx)(D.I,{children:(0,s.jsx)(K.A,{stroke:1.5})})})]},t)),(0,s.jsxs)(i.t,{variant:f.values.PICs.length>0?"ghost":"outline",w:f.values.PICs.length>0?"fit":"full",ml:"auto",pl:3,size:"md",onClick:()=>{f.setFieldValue("PICs",[...f.values.PICs,{name:"",value:null}])},children:[(0,s.jsx)(D.I,{children:(0,s.jsx)(X.A,{stroke:1.5})}),h.add]})]})})})})}),(0,s.jsx)(n.PK,{children:(0,s.jsx)(i.t,{type:"submit",form:t,colorPalette:x.colorPalette,loading:P,children:h.save})})]})})]})},ee=e=>{var t,l;let{filter:i,routeTitle:a}=e,{l:n}=(0,b.A)(),r=(0,I.a)(e=>e.getDisplay(J)),{error:d,initialLoading:c,data:o,onRetry:u,limit:h,setLimit:x,page:f,setPage:C,pagination:w}=(0,S.A)({initialData:void 0,url:"".concat(B,"/index"),params:i,dependencies:[i]}),y={headers:[{th:n.settings_navs.monev_master_data.pic_division},{th:"PIC",align:"center"},{th:n.added,sortable:!0},{th:n.updated,sortable:!0},{th:n.deleted,sortable:!0}],rows:null==o?void 0:o.map((e,t)=>({id:e.id,idx:t,data:e,dim:!!e.deletedAt,columns:[{td:(0,s.jsx)(j.v,{children:null==e?void 0:e.title}),value:null==e?void 0:e.title},{td:(0,s.jsx)(M,{picDivision:e}),value:"",align:"center"},{td:(0,V.Yq)(e.createdAt,{variant:"numeric",withTime:!0}),value:e.createdAt,dataType:"date",dashEmpty:!0},{td:(0,V.Yq)(e.updatedAt,{variant:"numeric",withTime:!0,dashEmpty:!0}),value:e.updatedAt,dataType:"date"},{td:(0,V.Yq)(e.deletedAt,{variant:"numeric",withTime:!0,dashEmpty:!0}),value:e.deletedAt,dataType:"date"}]})),rowOptions:[e=>({override:(0,s.jsx)(W,{data:e.data,routeTitle:a})})]},z={loading:(0,s.jsx)(A.Q,{}),error:(0,s.jsx)(P.A,{onRetry:u}),empty:(0,s.jsx)(g.A,{}),loaded:"table"===r?(0,s.jsx)(v.b,{headers:y.headers,rows:y.rows,rowOptions:y.rowOptions,batchOptions:y.batchOptions,limit:h,setLimit:x,page:f,setPage:C,totalPage:null==w||null==(t=w.meta)?void 0:t.last_page}):(0,s.jsx)(m.z,{data:o,dataProps:y,limit:h,setLimit:x,page:f,setPage:C,totalPage:null==w||null==(l=w.meta)?void 0:l.last_page,renderItem:e=>{let{item:t,row:l,details:i,selectedRows:n,toggleRowSelection:r}=e;return(0,s.jsx)(p.G,{item:{id:t.id,title:t.title,description:t.description,deletedAt:t.deletedAt},dataProps:y,row:l,selectedRows:n,toggleRowSelection:r,routeTitle:a,details:i},t.id)}})};return(0,s.jsxs)(s.Fragment,{children:[c&&z.loading,!c&&(0,s.jsxs)(s.Fragment,{children:[d&&z.error,!d&&(0,s.jsxs)(s.Fragment,{children:[o&&z.loaded,(!o||(0,T.VP)(o))&&z.empty]})]})]})};function et(){let{l:e}=(0,b.A)(),t=(0,G.usePathname)(),l=(0,O.xD)(t),i=(0,F.Ds)(e,(0,T.HV)(l).labelKey),[a,n]=(0,N.useState)({search:""});return(0,s.jsxs)(C.T,{children:[(0,s.jsx)($,{filter:a,setFilter:n,routeTitle:i}),(0,s.jsx)(ee,{filter:a,routeTitle:i})]})}},8616:(e,t,l)=>{Promise.resolve().then(l.bind(l,5289))},38752:(e,t,l)=>{"use strict";l.d(t,{X:()=>u});var s=l(95155),i=l(85897),a=l(25535),n=l(58226),r=l(85775),d=l(11698),c=l(7791),o=l(76150);let u=e=>{var t,l,u,h;let{user:x,...j}=e;return(0,s.jsxs)(o.z,{gap:3,...j,children:[(0,s.jsx)(r.E,{id:"avatar-".concat(x.id),src:(0,c.JU)(null==x||null==(l=x.photoProfile)||null==(t=l[0])?void 0:t.filePath),fallbackSrc:"".concat(d.CS,"/no-avatar.svg"),children:(0,s.jsx)(i.e,{src:(0,c.JU)(null==x||null==(h=x.photoProfile)||null==(u=h[0])?void 0:u.filePath),name:x.name,size:"sm"})}),(0,s.jsxs)(a.T,{children:[(0,s.jsx)(n.P,{lineHeight:1.2,children:x.name}),(0,s.jsx)(n.P,{fontSize:"sm",color:"fg.subtle",children:null==x?void 0:x.email})]})]})}},85897:(e,t,l)=>{"use strict";l.d(t,{e:()=>n});var s=l(95155),i=l(91980),a=l(12115);let n=(0,a.forwardRef)(function(e,t){let{name:l,src:a,srcSet:n,loading:d,icon:c,fallback:o,children:u,...h}=e;return(0,s.jsxs)(i.Cy,{ref:t,...h,children:[(0,s.jsx)(r,{name:l,icon:c,children:o}),(0,s.jsx)(i.BK,{src:a,srcSet:n,loading:d}),u]})}),r=(0,a.forwardRef)(function(e,t){let{name:l,icon:a,children:n,...r}=e;return(0,s.jsxs)(i.q5,{ref:t,...r,children:[n,null!=l&&null==n&&(0,s.jsx)(s.Fragment,{children:function(e){let t=e.trim().split(" "),l=null!=t[0]?t[0]:"",s=t.length>1?t[t.length-1]:"";return l&&s?"".concat(l.charAt(0)).concat(s.charAt(0)):l.charAt(0)}(l)}),null==l&&null==n&&(0,s.jsx)(i.hS,{asChild:!!a,children:a})]})})},98886:(e,t,l)=>{"use strict";l.d(t,{D:()=>r});var s=l(95155),i=l(36780),a=l(14200),n=l(54515);let r=(0,l(12115).forwardRef)(function(e,t){let{label:l,children:r,helperText:d,errorText:c,optionalText:o,optional:u,...h}=e,{l:x}=(0,i.A)();return(0,s.jsxs)(a.XO,{ref:t,gap:2,...h,children:[l&&(0,s.jsxs)(a.dh,{fontSize:"md",children:[l,u&&(0,s.jsx)(n.Ex,{colorScheme:"gray",color:"fg.muted",children:x.optional.toLocaleLowerCase()}),(0,s.jsx)(a.tR,{fallback:o})]}),r,d&&(0,s.jsx)(a.sp,{children:d}),c&&(0,s.jsx)(a.wp,{children:c})]})})}},e=>{e.O(0,[7596,586,9964,9320,1668,9595,6524,358,5246,6236,5161,3783,4923,2946,1372,9265,8832,819,5478,8902,806,4557,8441,4696,7358],()=>e(e.s=8616)),_N_E=e.O()}]);
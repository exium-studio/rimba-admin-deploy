(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6331],{11558:(e,t,r)=>{"use strict";r.d(t,{b:()=>s});var l=r(95155),a=r(12115),o=r(25535),n=r(93454);let s=(0,a.forwardRef)((e,t)=>{let{children:r,scrollY:a=!1,...s}=e,{themeConfig:i}=(0,n.p)();return(0,l.jsx)(o.T,{ref:t,className:a?"scrollY":"",bg:"body",rounded:i.radii.container,...s,children:r})});s.displayName="ItemContainer"},14990:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let l=(0,r(30313).A)("outline","users","Users",[["path",{d:"M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"svg-2"}],["path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85",key:"svg-3"}]])},18514:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>B});var l=r(95155),a=r(25535),o=r(58226),n=r(20243),s=r(50588),i=r(77141),u=r(11558),c=r(89639),d=r(98488),p=r(65609),h=r(46481),v=r(36780),_=r(93454),f=r(35189),g=r(48857),k=r(46977),m=r(56313),x=r(39602),b=r(76150),A=r(26074),y=r(92091),j=r(46845),T=r(67301),E=r(94612),M=r(30313);let C=(0,M.A)("outline","book-2","Book2",[["path",{d:"M19 4v16h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12z",key:"svg-0"}],["path",{d:"M19 16h-12a2 2 0 0 0 -2 2",key:"svg-1"}],["path",{d:"M9 8h6",key:"svg-2"}]]),w=(0,M.A)("outline","books","Books",[["path",{d:"M5 4m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M9 4m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M5 8h4",key:"svg-2"}],["path",{d:"M9 16h4",key:"svg-3"}],["path",{d:"M13.803 4.56l2.184 -.53c.562 -.135 1.133 .19 1.282 .732l3.695 13.418a1.02 1.02 0 0 1 -.634 1.219l-.133 .041l-2.184 .53c-.562 .135 -1.133 -.19 -1.282 -.732l-3.695 -13.418a1.02 1.02 0 0 1 .634 -1.219l.133 -.041z",key:"svg-4"}],["path",{d:"M14 9l4 -1",key:"svg-5"}],["path",{d:"M16 16l3.923 -.98",key:"svg-6"}]]),S=(0,M.A)("outline","help-hexagon","HelpHexagon",[["path",{d:"M19.875 6.27c.7 .398 1.13 1.143 1.125 1.948v7.284c0 .809 -.443 1.555 -1.158 1.948l-6.75 4.27a2.269 2.269 0 0 1 -2.184 0l-6.75 -4.27a2.225 2.225 0 0 1 -1.158 -1.948v-7.285c0 -.809 .443 -1.554 1.158 -1.947l6.75 -3.98a2.33 2.33 0 0 1 2.25 0l6.75 3.98h-.033z",key:"svg-0"}],["path",{d:"M12 16v.01",key:"svg-1"}],["path",{d:"M12 13a2 2 0 0 0 .914 -3.782a1.98 1.98 0 0 0 -2.414 .483",key:"svg-2"}]]),R=(0,M.A)("outline","star","Star",[["path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z",key:"svg-0"}]]);var P=r(14990),I=r(64962),z=r(68425),L=r(47734),N=r(10232),U=r(62851),D=r(14724);let W=e=>{let{icon:t,label:r,value:n,iconBg:s,...i}=e,{themeConfig:u}=(0,_.p)();return(0,l.jsxs)(b.z,{gap:5,p:4,bg:"body",rounded:u.radii.container,...i,children:[(0,l.jsx)(A.j,{p:3,bg:s||"".concat((0,g.tp)(u.primaryColorHex,.075)),children:(0,l.jsx)(y.I,{boxSize:8,color:u.primaryColorHex,children:t})}),(0,l.jsxs)(a.T,{children:[(0,l.jsx)(o.P,{fontSize:"xl",fontWeight:"bold",children:n}),(0,l.jsx)(o.P,{fontWeight:"medium",color:"fg.subtle",children:r})]})]})},F=e=>{var t;let{data:r,...a}=e,{l:o,lang:n}=(0,v.A)(),{themeConfig:s}=(0,_.p)(),i=(0,m.u)({data:null==r||null==(t=r.userStatsAttemptFinished)?void 0:t.map((e,t)=>({month:h.K[n][t],user:e.value}))});return(0,l.jsxs)(u.b,{...a,children:[(0,l.jsx)(c.o,{borderless:!0,children:(0,l.jsx)(d.A,{children:o.total_completed_topic_by_user})}),(0,l.jsx)(x.Bx,{maxH:"md",chart:i,pb:4,pr:4,children:(0,l.jsxs)(I.b,{data:i.data,margin:{left:40,right:40,top:40},children:[(0,l.jsx)(z.d,{stroke:i.color("border"),strokeDasharray:"3 3",horizontal:!1}),(0,l.jsx)(L.W,{dataKey:i.key("month"),tickFormatter:e=>e.slice(0,3),stroke:i.color("border")}),(0,l.jsx)(N.m,{animationDuration:100,cursor:{stroke:i.color("border")},content:(0,l.jsx)(x.II,{hideLabel:!0})}),(0,l.jsx)(U.N,{isAnimationActive:!1,dataKey:i.key("user"),fill:i.color(s.primaryColorHex),stroke:i.color(s.primaryColorHex),strokeWidth:2,children:(0,l.jsx)(D.Ze,{dataKey:i.key("user"),position:"right",offset:10,style:{fontWeight:"600",fill:i.color("fg")}})})]})})]})};function B(){var e,t,r,o,u,c;let{l:d}=(0,v.A)(),h={totalEducator:{icon:(0,l.jsx)(T.A,{stroke:1.5}),label:d.total_educator},totalStudent:{icon:(0,l.jsx)(E.A,{stroke:1.5}),label:d.total_student},totalTopic:{icon:(0,l.jsx)(C,{stroke:1.5}),label:d.total_topic},totalMaterial:{icon:(0,l.jsx)(w,{stroke:1.5}),label:d.total_material},averageScoreTotal:{icon:(0,l.jsx)(S,{stroke:1.5}),label:d.average_quiz_score},averageFeedback:{icon:(0,l.jsx)(R,{stroke:1.5}),label:d.average_rating},totalUserAttemptParticipant:{icon:(0,l.jsx)(P.A,{stroke:1.5}),label:d.total_user_learning_attempt}},{error:_,initialLoading:g,data:m,onRetry:x}=(0,f.A)({initialData:void 0,url:"/api/kmis/dashboard/info",dependencies:[],dataResource:!1}),b={loading:(0,l.jsx)(n.E,{flex:1}),error:(0,l.jsx)(i.A,{onRetry:x}),empty:(0,l.jsx)(s.A,{}),loaded:(0,l.jsxs)(a.T,{gap:4,children:[(0,l.jsxs)(j.r,{columns:[2,null,3],gap:4,children:[(0,l.jsx)(W,{icon:h.totalEducator.icon,label:h.totalEducator.label,value:(0,k.ZV)(null==m||null==(e=m.totalEducator)?void 0:e.value)||"-"}),(0,l.jsx)(W,{icon:h.totalStudent.icon,label:h.totalStudent.label,value:(0,k.ZV)(null==m||null==(t=m.totalStudent)?void 0:t.value)||"-"}),(0,l.jsx)(W,{icon:h.totalTopic.icon,label:h.totalTopic.label,value:(0,k.ZV)(null==m||null==(r=m.totalTopic)?void 0:r.value)||"-"}),(0,l.jsx)(W,{icon:h.totalMaterial.icon,label:h.totalMaterial.label,value:(0,k.ZV)(null==m||null==(o=m.totalMaterial)?void 0:o.value)||"-"}),(0,l.jsx)(W,{icon:h.averageFeedback.icon,label:h.averageFeedback.label,value:(0,k.ZV)(null==m||null==(u=m.averageFeedback)?void 0:u.value)||"-"}),(0,l.jsx)(W,{icon:h.totalUserAttemptParticipant.icon,label:h.totalUserAttemptParticipant.label,value:(0,k.ZV)(null==m||null==(c=m.totalUserAttemptParticipant)?void 0:c.value)||"-"})]}),(0,l.jsx)(F,{data:m})]})};return(0,l.jsxs)(p.L,{children:[g&&b.loading,!g&&(0,l.jsxs)(l.Fragment,{children:[_&&b.error,!_&&(0,l.jsxs)(l.Fragment,{children:[m&&b.loaded,!m&&b.empty]})]})]})}},20243:(e,t,r)=>{"use strict";r.d(t,{E:()=>n});var l=r(95155),a=r(93454),o=r(19971);let n=e=>{let{...t}=e,{themeConfig:r}=(0,a.p)();return(0,l.jsx)(o.EA,{rounded:r.radii.component,...t})}},22484:(e,t,r)=>{"use strict";r.d(t,{O5:()=>o,c4:()=>a,gL:()=>n});var l=r(32309);function a(){return(0,l.c7)("__auth_token")||null}function o(e){(0,l.cT)("__auth_token",e)}function n(){let e=(0,l.c7)("__user_data");if(!e)return null;try{return JSON.parse(e)}catch(e){return console.error("Failed to parse user data:",e),null}}},35189:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var l=r(12115),a=r(40773),o=r(93885),n=r(79310);let s=e=>{let{initialData:t,dummyData:r,payload:s,params:i,url:u,method:c,dependencies:d=[],conditions:p=!0,noRt:h=!1,initialPage:v=1,initialLimit:_=15,intialOffset:f=0,dataResource:g=!0,withLoadingBar:k=!0}=e,m=(0,n.z)(e=>e.setLoadingBar),[x,b]=(0,l.useState)(r||t),[A,y]=(0,l.useState)(!0),[j,T]=(0,l.useState)(!1),[E,M]=(0,l.useState)(v),[C,w]=(0,l.useState)(_),[S,R]=(0,l.useState)(f),[P,I]=(0,l.useState)(void 0),{rt:z}=(0,o.A)(),{req:L,response:N,loading:U,error:D,status:W}=(0,a.A)({id:u||"data-state",showLoadingToast:!1,showErrorToast:!0,showSuccessToast:!1}),F={limit:C,page:E,...s},B={limit:C,page:E,...i},H={url:u,method:c,data:F,params:g?B:null},O=(0,l.useRef)(null),V=(0,l.useRef)(null);function q(){if(!u)return;V.current=u;let e=new AbortController;O.current=e;let t={...H,signal:e.signal};Promise.resolve().then(()=>{V.current===u&&L({config:t,onResolve:{onSuccess:e=>{var t,l,a,o,n,s,i;I(null==e||null==(l=e.data)||null==(t=l.data)?void 0:t.pagination),y(!1),r?b(r):b(g?Array.isArray(null==e||null==(a=e.data)?void 0:a.data)?null==e||null==(o=e.data)?void 0:o.data:null==e||null==(s=e.data)||null==(n=s.data)?void 0:n.data:null==e||null==(i=e.data)?void 0:i.data)},onError:()=>{y(!1)}}})})}return(0,l.useEffect)(()=>{if(!p||!u)return;let e=setTimeout(()=>{q()},50);return()=>{clearTimeout(e),O.current&&O.current.abort()}},[p,u,E,C,...h?[]:[z],...d||[]]),(0,l.useEffect)(()=>{w(_)},[_]),(0,l.useEffect)(()=>{u||y(!1)},[u]),(0,l.useEffect)(()=>{k&&m(U)},[U]),{makeRequest:q,onRetry:function(){y(!0),q()},data:x,setData:b,initialLoading:A,setInitialLoading:y,loading:U,error:D,loadMore:function(){T(!0),L({config:{...H},onResolve:{onSuccess:e=>{var t,r,l;b(x?[...x,...null==e||null==(t=e.data)?void 0:t.data]:null==e||null==(r=e.data)?void 0:r.data),I(null==e||null==(l=e.data)?void 0:l.pagination),T(!1)}}})},loadingLoadMore:j,setLoadingLoadMore:T,pagination:P,page:E,setPage:M,limit:C,setLimit:w,offset:S,setOffset:R,response:N,status:W}}},39987:(e,t,r)=>{Promise.resolve().then(r.bind(r,18514))},40773:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var l=r(38126),a=r(64254),o=r(36780),n=r(95125),s=r(22484);let i=n.A.create({baseURL:"https://rimba.webgis.app/api",headers:{Accept:"application/json"}});async function u(){try{let e=(await n.A.post("".concat("https://rimba.webgis.app/api","/auth/refresh"),{},{withCredentials:!0})).data.accessToken;return(0,s.O5)(e),e}catch(e){return null}}i.interceptors.request.use(e=>{let t=(0,s.c4)();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,async e=>{var t;let r=e.config;if((null==(t=e.response)?void 0:t.status)===401&&!r._retry){r._retry=!0;let e=await u();if(e)return r.headers.Authorization="Bearer ".concat(e),i(r)}return Promise.reject(e)});var c=r(20063),d=r(12115);function p(e){let{id:t,showLoadingToast:r=!0,showSuccessToast:n=!0,showErrorToast:s=!0,loadingMessage:u,successMessage:p,errorMessage:h,signinPath:v="/"}=e,{l:_}=(0,o.A)(),f=(0,a.A)(e=>e.removeAuth),g=(0,c.useRouter)(),k=(0,d.useRef)(null),[m,x]=(0,d.useState)({loading:!1,status:null,error:null,response:null}),{loading:b,status:A,error:y,response:j}=m,T={title:(null==u?void 0:u.title)||_.loading_default.title,description:(null==u?void 0:u.description)||_.loading_default.description},E={title:(null==p?void 0:p.title)||_.success_default.title,description:(null==p?void 0:p.description)||_.success_default.description},M=(0,d.useCallback)(e=>{x(t=>({...t,...e}))},[]);return{req:(0,d.useCallback)(async e=>{var a,o,u;let{config:c,onResolve:d}=e;try{r&&l.X.loading({id:t,title:T.title,description:T.description,action:{label:"Close",onClick:()=>{}}}),M({loading:!0,error:null,status:null}),c.url="".concat("https://rimba.webgis.app/api").concat(c.url),k.current&&k.current.abort();let e=new AbortController;k.current=e,c.signal=e.signal;let o=await i(c);return M({loading:!1,status:o.status,response:o}),[200,201,304].includes(o.status)&&(null==d||null==(a=d.onSuccess)||a.call(d,o),n?l.X.update(t,{type:"success",title:E.title,description:E.description,action:{label:"Close",onClick:()=>{}}}):l.X.dismiss(t)),o}catch(n){if("ERR_CANCELED"===n.code)return void M({loading:!1});let e=null==(o=n.response)?void 0:o.status;switch(M({loading:!1,error:!0,status:e,response:n.response}),e){case 401:case 403:f(),null==g||g.push(v);break;case 503:null==g||g.push("/maintenance")}let a=(e=>{var t,r,l;let a=null==(t=e.response)?void 0:t.status,o=null==(l=e.response)||null==(r=l.data)?void 0:r.case;if("ERR_NETWORK"===e.code)return _.error_network;if(a&&(null==h?void 0:h[a]))return o&&h[a][o]?h[a][o]:h[a].default||{title:_.error_default.title,description:_.error_default.description};switch(a){case 400:if("INVALID_CREDENTIALS"===o)return _.error_signin_wrong_credentials;return _.error_400_default;case 401:return _.error_401_default;case 403:return _.error_403_default;case 404:return _.error_404_default;case 422:switch(o){case"TARGET_REQUIRED":return _.error_422_target_required;case"MINIMUM_FILE_REQUIRED":return _.error_422_file_required;case"DUPLICATE_FILENAME":return _.error_422_duplicate_file_name;case"DUPLICATE_TITLE":return _.error_422_duplicate_kmis_topic_title;case"DUPLICATE_ANSWERS":return _.error_422_duplicate_kmis_quiz_option;case"DUPLICATE_QUESTION":return _.error_422_duplicate_question;default:return _.error_422_default}case 429:return _.error_429_default;case 500:return _.error_500_default;default:return _.error_default}})(n);throw s&&(r?l.X.update(t,{type:"error",...a,action:{label:"Close",onClick:()=>{}}}):l.X.create({type:"error",...a,action:{label:"Close",onClick:()=>{}}})),null==d||null==(u=d.onError)||u.call(d,n),n}},[t,r,n,s,T,E,v,h,_,g,M]),loading:b,status:A,error:y,response:j,setReqState:x}}},48857:(e,t,r)=>{"use strict";function l(e,t){return e+Math.round(255*t).toString(16).padStart(2,"0")}r.d(t,{tp:()=>l})},50588:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var l=r(95155),a=r(25535),o=r(52012),n=r(36780),s=r(92091),i=r(53360),u=r(58832);function c(e){let{title:t,description:r,icon:c,children:d,...p}=e,{l:h}=(0,n.A)();return(0,l.jsxs)(a.T,{w:"fit",m:"auto",align:"center",minH:o.Y6,justify:"center",gap:4,...p,children:[(0,l.jsx)(u.A,{icon:(0,l.jsx)(s.I,{mb:t?-2:0,children:c||(0,l.jsx)(i.A,{stroke:1.8})}),title:null!=t?t:h.alert_no_data.title,description:null!=r?r:h.alert_no_data.description,maxW:"300px"}),d]})}},58832:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var l=r(95155),a=r(58226),o=r(59964),n=r(92091),s=r(53360);let i=e=>{let{icon:t,title:r,description:i,children:u,...c}=e,d="string"==typeof r,p="string"==typeof i;return(0,l.jsxs)(o.T,{gap:1,p:4,...c,children:[(0,l.jsx)(n.I,{mb:2,color:"fg.subtle",boxSize:9,children:t||(0,l.jsx)(s.A,{stroke:1.8})}),d&&(0,l.jsx)(a.P,{textAlign:"center",fontWeight:"semibold",children:r}),!d&&r,p&&(0,l.jsx)(a.P,{maxW:"300px",textAlign:"center",color:"fg.subtle",children:i}),!p&&i,u]})}},64254:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var l=r(32309);let a=(0,r(25959).v)((e,t)=>({authToken:(0,l.c7)("__auth_token"),setAuthToken:t=>e(()=>({authToken:t})),verifiedAuthToken:null,setVerifiedAuthToken:t=>e(()=>((0,l.cT)("__auth_token",t||""),{verifiedAuthToken:t})),role:null,setRole:t=>e(()=>({role:t})),permissions:null,setPermissions:t=>e(()=>({permissions:t})),hasPermissions:e=>{var r;let l=null!=(r=t().permissions)?r:[];return e.every(e=>l.includes(e))},removeAuth:()=>{t().removeAuthToken(),t().removePermissions(),t().removeRole(),(0,l.Od)("__user_data"),t().setVerifiedAuthToken(null),t().setAuthToken(null)},removeAuthToken:()=>{(0,l.Od)("__auth_token"),e(()=>({authToken:null,verifiedAuthToken:null}))},removePermissions:()=>e(()=>({permissions:void 0})),removeRole:()=>e(()=>({role:void 0}))}))},65609:(e,t,r)=>{"use strict";r.d(t,{L:()=>s,T:()=>i});var l=r(95155),a=r(25535),o=r(93454),n=r(12115);let s=(0,n.forwardRef)((e,t)=>{let{children:r,...o}=e;return(0,l.jsx)(a.T,{ref:t,flex:1,gap:4,p:[2,null,4],pt:"0 !important",overflow:"auto",...o,children:r})});s.displayName="PageContainer";let i=(0,n.forwardRef)((e,t)=>{let{children:r,...n}=e,{themeConfig:s}=(0,o.p)();return(0,l.jsx)(a.T,{ref:t,flex:1,bg:"body",rounded:s.radii.container,overflow:"auto",...n,children:r})});i.displayName="PageContent"},67301:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let l=(0,r(30313).A)("outline","chalkboard-teacher","ChalkboardTeacher",[["path",{d:"M8 19h-3a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v11a1 1 0 0 1 -1 1",key:"svg-0"}],["path",{d:"M12 14a2 2 0 1 0 4.001 -.001a2 2 0 0 0 -4.001 .001",key:"svg-1"}],["path",{d:"M17 19a2 2 0 0 0 -2 -2h-2a2 2 0 0 0 -2 2",key:"svg-2"}]])},77141:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var l=r(95155),a=r(46426),o=r(25535),n=r(58832),s=r(52012),i=r(36780),u=r(93454),c=r(92091),d=r(44748);function p(e){let{title:t,description:r,icon:p,onRetry:h,children:v,..._}=e,{themeConfig:f}=(0,u.p)(),{l:g}=(0,i.A)();return(0,l.jsxs)(o.T,{w:"fit",m:"auto",minH:s.Y6,justify:"center",..._,children:[(0,l.jsx)(n.A,{icon:(0,l.jsx)(c.I,{mb:t?-2:0,children:p||(0,l.jsx)(d.A,{stroke:1.8})}),title:null!=t?t:g.alert_retry.title,description:null!=r?r:g.alert_retry.description,maxW:"300px"}),(0,l.jsx)(a.t,{w:"120px",className:"clicky",variant:"outline",colorPalette:f.colorPalette,mx:"auto",onClick:h,children:g.retry}),v]})}},79310:(e,t,r)=>{"use strict";r.d(t,{z:()=>l});let l=(0,r(25959).v)(e=>({loadingBar:!1,setLoadingBar:t=>e({loadingBar:t})}))},89639:(e,t,r)=>{"use strict";r.d(t,{o:()=>o});var l=r(95155),a=r(76150);let o=e=>{let{children:t,borderless:r=!1,...o}=e;return(0,l.jsx)(a.z,{borderBottom:"1px solid",borderColor:r?"transparent":"border.subtle",justify:"space-between",wrap:"wrap",px:4,py:3,gap:4,...o,children:t})}},93885:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let l=(0,r(25959).v)((e,t)=>({rt:!1,setRt:r=>{"function"==typeof r?e({rt:r(t().rt)}):e({rt:r})}}))},94612:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let l=(0,r(30313).A)("outline","school","School",[["path",{d:"M22 9l-10 -4l-10 4l10 4l10 -4v6",key:"svg-0"}],["path",{d:"M6 10.6v5.4a6 3 0 0 0 12 0v-5.4",key:"svg-1"}]])},98488:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var l=r(95155),a=r(58226);let o=e=>{let{children:t,...r}=e;return(0,l.jsx)(a.P,{fontWeight:"semibold",...r,children:t})}}},e=>{e.O(0,[7596,586,9964,9320,1668,9595,358,3968,8832,819,8441,4696,7358],()=>e(e.s=39987)),_N_E=e.O()}]);
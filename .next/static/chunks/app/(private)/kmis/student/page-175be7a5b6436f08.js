(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2768],{38582:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(30313).A)("outline","layout-grid","LayoutGrid",[["path",{d:"M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M14 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-3"}]])},38752:(e,t,a)=>{"use strict";a.d(t,{X:()=>u});var r=a(95155),i=a(85897),l=a(25535),s=a(58226),n=a(85775),o=a(11698),d=a(7791),c=a(76150);let u=e=>{var t,a,u,v;let{user:h,...m}=e;return(0,r.jsxs)(c.z,{gap:3,...m,children:[(0,r.jsx)(n.E,{id:"avatar-".concat(h.id),src:(0,d.JU)(null==h||null==(a=h.photoProfile)||null==(t=a[0])?void 0:t.filePath),fallbackSrc:"".concat(o.CS,"/no-avatar.svg"),children:(0,r.jsx)(i.e,{src:(0,d.JU)(null==h||null==(v=h.photoProfile)||null==(u=v[0])?void 0:u.filePath),name:h.name,size:"sm"})}),(0,r.jsxs)(l.T,{children:[(0,r.jsx)(s.P,{lineHeight:1.2,children:h.name}),(0,r.jsx)(s.P,{fontSize:"sm",color:"fg.subtle",children:null==h?void 0:h.email})]})]})}},57514:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(30313).A)("outline","table","Table",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]])},66335:(e,t,a)=>{"use strict";a.d(t,{Aq:()=>m,MI:()=>o,Ng:()=>h});var r=a(91065),i=a(4966),l=a(95449),s=a(47033),n=a(87509),o=(0,r.y)("avatar").parts("root","image","fallback"),d=o.build(),c=e=>e.ids?.root??`avatar:${e.id}`,u=e=>e.ids?.image??`avatar:${e.id}:image`,v=e=>e.getById(u(e));function h(e,t){let{state:a,send:r,prop:i,scope:l}=e,s=a.matches("loaded");return{loaded:s,setSrc(e){let t=v(l);t?.setAttribute("src",e)},setLoaded(){r({type:"img.loaded",src:"api"})},setError(){r({type:"img.error",src:"api"})},getRootProps:()=>t.element({...d.root.attrs,dir:i("dir"),id:c(l)}),getImageProps:()=>t.img({...d.image.attrs,hidden:!s,dir:i("dir"),id:u(l),"data-state":s?"visible":"hidden",onLoad(){r({type:"img.loaded",src:"element"})},onError(){r({type:"img.error",src:"element"})}}),getFallbackProps:()=>t.element({...d.fallback.attrs,dir:i("dir"),id:l.ids?.fallback??`avatar:${l.id}:fallback`,hidden:s,"data-state":s?"hidden":"visible"})}}var m=(0,l.Op)({initialState:()=>"loading",effects:["trackImageRemoval","trackSrcChange"],on:{"src.change":{target:"loading"},"img.unmount":{target:"error"}},states:{loading:{entry:["checkImageStatus"],on:{"img.loaded":{target:"loaded",actions:["invokeOnLoad"]},"img.error":{target:"error",actions:["invokeOnError"]}}},error:{on:{"img.loaded":{target:"loaded",actions:["invokeOnLoad"]}}},loaded:{on:{"img.error":{target:"error",actions:["invokeOnError"]}}}},implementations:{actions:{invokeOnLoad({prop:e}){e("onStatusChange")?.({status:"loaded"})},invokeOnError({prop:e}){e("onStatusChange")?.({status:"error"})},checkImageStatus({send:e,scope:t}){let a=v(t);if(a?.complete){var r;e({type:(r=a).complete&&0!==r.naturalWidth&&0!==r.naturalHeight?"img.loaded":"img.error",src:"ssr"})}}},effects:{trackImageRemoval({send:e,scope:t}){let a=t.getById(c(t));return(0,i.Ge)(a,{callback(t){Array.from(t[0].removedNodes).find(e=>e.nodeType===Node.ELEMENT_NODE&&e.matches("[data-scope=avatar][data-part=image]"))&&e({type:"img.unmount"})}})},trackSrcChange({send:e,scope:t}){let a=v(t);return(0,i.mx)(a,{attributes:["src","srcset"],callback(){e({type:"src.change"})}})}}}}),g=(0,s.x)()(["dir","id","ids","onStatusChange","getRootNode"]);(0,n.PM)(g)},82067:(e,t,a)=>{"use strict";a.d(t,{u:()=>s});var r=a(95155),i=a(36780),l=a(54515);let s=e=>{let{accountStatusId:t,...a}=e,{l:s}=(0,i.A)(),n={1:{label:s.inactive,colorPalette:"gray"},2:{label:s.active,colorPalette:"green"},3:{label:s.deactivated,colorPalette:"red"}};return(0,r.jsx)(l.Ex,{colorPalette:n[t].colorPalette,justifyContent:"center",w:"76px",...a,children:n[t].label})}},85897:(e,t,a)=>{"use strict";a.d(t,{e:()=>s});var r=a(95155),i=a(91980),l=a(12115);let s=(0,l.forwardRef)(function(e,t){let{name:a,src:l,srcSet:s,loading:o,icon:d,fallback:c,children:u,...v}=e;return(0,r.jsxs)(i.Cy,{ref:t,...v,children:[(0,r.jsx)(n,{name:a,icon:d,children:c}),(0,r.jsx)(i.BK,{src:l,srcSet:s,loading:o}),u]})}),n=(0,l.forwardRef)(function(e,t){let{name:a,icon:l,children:s,...n}=e;return(0,r.jsxs)(i.q5,{ref:t,...n,children:[s,null!=a&&null==s&&(0,r.jsx)(r.Fragment,{children:function(e){let t=e.trim().split(" "),a=null!=t[0]?t[0]:"",r=t.length>1?t[t.length-1]:"";return a&&r?"".concat(a.charAt(0)).concat(r.charAt(0)):a.charAt(0)}(a)}),null==a&&null==s&&(0,r.jsx)(i.hS,{asChild:!!l,children:l})]})})},86430:(e,t,a)=>{"use strict";a.d(t,{F:()=>c});var r=a(95155),i=a(46426),l=a(92091),s=a(57514),n=a(38582),o=a(50572),d=a(3455);function c(e){let{navKey:t}=e,a=(0,d.a)(e=>e.displays),c=(0,d.a)(e=>e.setDisplay),u=(0,o.Q)(),v="table"===(a[t]||"table");return(0,r.jsxs)(i.t,{iconButton:u,size:"md",w:u?void 0:"100px",variant:"outline",onClick:()=>c(t,v?"grid":"table"),children:[(0,r.jsx)(l.I,{children:v?(0,r.jsx)(s.A,{stroke:1.5}):(0,r.jsx)(n.A,{stroke:1.5})}),!u&&(v?"Table":"Grid")]})}},91980:(e,t,a)=>{"use strict";a.d(t,{q5:()=>T,hS:()=>I,BK:()=>R,Cy:()=>S});var r=a(95155),i=a(95449),l=a(12115),s=a(82101),n=a(56248);let[o,d]=(0,a(98581).q)({name:"AvatarContext",hookName:"useAvatarContext",providerName:"<AvatarProvider />"}),c=(0,l.forwardRef)((e,t)=>{let[{value:a},l]=(0,s.P)()(e,["value"]),d=(0,i.v6)(a.getRootProps(),l);return(0,r.jsx)(o,{value:a,children:(0,r.jsx)(n.X.div,{...d,ref:t})})});c.displayName="AvatarRootProvider";var u=a(66335),v=a(21467),h=a(22977),m=a(52131);let g=(0,l.forwardRef)((e,t)=>{let[a,d]=(0,s.P)()(e,["id","ids","onStatusChange"]),c=(e=>{let t=(0,l.useId)(),{getRootNode:a}=(0,h.w)(),{dir:r}=(0,m.g)(),i={id:t,dir:r,getRootNode:a,...e},s=(0,v.zl)(u.Aq,i);return u.Ng(s,v._B)})(a),g=(0,i.v6)(c.getRootProps(),d);return(0,r.jsx)(o,{value:c,children:(0,r.jsx)(n.X.div,{...g,ref:t})})});g.displayName="AvatarRoot";let p=(0,l.forwardRef)((e,t)=>{let a=d(),l=(0,i.v6)(a.getFallbackProps(),e);return(0,r.jsx)(n.X.span,{...l,ref:t})});p.displayName="AvatarFallback";let f=(0,l.forwardRef)((e,t)=>{let a=d(),l=(0,i.v6)(a.getImageProps(),e);return(0,r.jsx)(n.X.img,{...l,ref:t})});f.displayName="AvatarImage";var x=a(57181),b=a(74474),j=a(17174);let{withProvider:A,withContext:y,useStyles:k,useClassNames:P,PropsProvider:C}=(0,x.c)({key:"avatar"});A(c,"root",{forwardAsChild:!0});let S=A(g,"root",{forwardAsChild:!0}),w=(0,b.B)(p,{},{forwardAsChild:!0}),T=(0,l.forwardRef)(function(e,t){let a=k(),i=P(),{name:l,...s}=e;return(0,r.jsx)(w,{ref:t,...s,className:(0,j.cx)(e.className,i.fallback),css:[a.fallback,e.css],children:e.children||e.asChild?e.children:e.name?function(e){let t=e.trim().split(" "),a=null!=t[0]?t[0]:"",r=t.length>1?t[t.length-1]:"";return a&&r?"".concat(a.charAt(0)).concat(r.charAt(0)):a.charAt(0)}(e.name):(0,r.jsx)(I,{})})}),R=y(f,"image",{forwardAsChild:!0,defaultProps:{draggable:"false",referrerPolicy:"no-referrer"}}),I=(0,l.forwardRef)(function(e,t){return(0,r.jsx)(b.B.svg,{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"1.2em",width:"1.2em",ref:t,...e,children:(0,r.jsx)("path",{d:"M20 22H18V20C18 18.3431 16.6569 17 15 17H9C7.34315 17 6 18.3431 6 20V22H4V20C4 17.2386 6.23858 15 9 15H15C17.7614 15 20 17.2386 20 20V22ZM12 13C8.68629 13 6 10.3137 6 7C6 3.68629 8.68629 1 12 1C15.3137 1 18 3.68629 18 7C18 10.3137 15.3137 13 12 13ZM12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z"})})})},92980:(e,t,a)=>{Promise.resolve().then(a.bind(a,97371))},97371:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>q});var r=a(95155),i=a(35891),l=a(58226),s=a(571),n=a(46767),o=a(82067),d=a(80192),c=a(86430),u=a(98064),v=a(63041),h=a(48930),m=a(50588),g=a(77141),p=a(38752),f=a(65609),x=a(70637),b=a(11698),j=a(3455),A=a(36780),y=a(93885),k=a(35189),P=a(40773),C=a(60439),S=a(32309),w=a(46977),T=a(2431),R=a(7791),I=a(76150),_=a(92091),E=a(99419),M=a(2186),N=a(20063),O=a(12115);let z="/api/kmis/student",F="kmis_student",H=e=>{let{children:t,content:a,...i}=e;return(0,r.jsx)(n.m,{content:a,positioning:{placement:"right"},...i,children:t})},L=e=>{let{filter:t,setFilter:a,...i}=e;return(0,r.jsxs)(I.z,{p:3,...i,children:[(0,r.jsx)(s.A,{inputValue:t.search,onChange:e=>{a({...t,search:e})}}),(0,r.jsx)(c.F,{navKey:F})]})},V=e=>{let t="".concat(F,"_activate"),{activateAccountIds:a,clearSelectedRows:l,disabled:s,routeTitle:n}=e,{l:o}=(0,A.A)(),c=(0,y.A)(e=>e.setRt),{req:u,loading:v}=(0,P.A)({id:t,loadingMessage:{title:(0,T.ZH)("".concat(o.activate," ").concat(n))},successMessage:{title:(0,T.ZH)("".concat(o.activate," ").concat(n," ").concat(o.successful))}});return(0,r.jsx)(d.H,{w:"full",id:"".concat(t,"-").concat(a),title:"".concat(o.activate," ").concat(n),description:o.msg_activate,confirmLabel:"".concat(o.activate),onConfirm:function(){(0,S.aX)(),u({config:{url:"".concat(z,"/activate"),method:"PATCH",data:{activateAccountIds:a}},onResolve:{onSuccess:()=>{c(e=>!e),null==l||l()}}})},loading:v,disabled:s,children:(0,r.jsx)(H,{content:o.activate,children:(0,r.jsxs)(i.Dr,{value:"activate",disabled:s,children:[o.activate,(0,r.jsx)(_.I,{boxSize:"18px",ml:"auto",children:(0,r.jsx)(E.A,{stroke:1.5})})]})})})},B=e=>{let t="".concat(F,"_deactivate"),{deactivateAccountIds:a,clearSelectedRows:l,disabled:s,routeTitle:n}=e,{l:o}=(0,A.A)(),c=(0,y.A)(e=>e.setRt),{req:u,loading:v}=(0,P.A)({id:t,loadingMessage:{title:(0,T.ZH)("".concat(o.deactivate," ").concat(n))},successMessage:{title:(0,T.ZH)("".concat(o.deactivate," ").concat(n," ").concat(o.successful))}});return(0,r.jsx)(d.H,{w:"full",id:"".concat(t,"-").concat(a),title:"".concat(o.deactivate," ").concat(n),description:o.msg_deactivate,confirmLabel:"".concat(o.deactivate),onConfirm:function(){(0,S.aX)(),u({config:{url:"".concat(z,"/deactivate"),method:"PATCH",data:{deactivateAccountIds:a}},onResolve:{onSuccess:()=>{c(e=>!e),null==l||l()}}})},confirmButtonProps:{color:"fg.error",colorPalette:"gray",variant:"outline"},loading:v,disabled:s,children:(0,r.jsx)(H,{content:o.deactivate,children:(0,r.jsxs)(i.Dr,{value:"deactivate",color:"fg.error",disabled:s,children:[o.deactivate,(0,r.jsx)(_.I,{boxSize:"18px",ml:"auto",children:(0,r.jsx)(M.A,{stroke:1.5})})]})})})},Z=e=>{var t,a;let{filter:i,routeTitle:s}=e,{l:n}=(0,A.A)(),d=(0,j.a)(e=>e.getDisplay(F)),{error:c,initialLoading:f,data:y,onRetry:P,limit:S,setLimit:T,page:_,setPage:E,pagination:M}=(0,k.A)({initialData:void 0,url:"".concat(z,"/index"),params:i,dependencies:[i]}),N={headers:[{th:n.educator,sortable:!0},{th:n.account_status,sortable:!0},{th:n.private_navs.kmis.topic,sortable:!0,align:"center"},{th:n.finished_topic,sortable:!0,align:"center"},{th:n.avg_kmis_score,sortable:!0,align:"center"},{th:n.added,sortable:!0},{th:n.updated,sortable:!0},{th:n.deleted,sortable:!0},{th:n.deactivated,sortable:!0}],rows:null==y?void 0:y.map((e,t)=>({id:e.id,idx:t,data:e,dim:!!e.deletedAt,columns:[{td:(0,r.jsx)(p.X,{user:e.user}),value:e.user.name},{td:(0,r.jsx)(o.u,{accountStatusId:e.user.accountStatus}),value:e.user.accountStatus,align:"center",dataType:"number"},{td:(0,w.ZV)(e.totalTopic),value:e.totalTopic,align:"center",dataType:"number"},{td:(0,w.ZV)(e.totalFinished),value:e.totalFinished,align:"center",dataType:"number"},{td:(0,w.ZV)(e.avgScoreFinished),value:e.avgScoreFinished,align:"center",dataType:"number"},{td:(0,w.Yq)(e.createdAt,{variant:"numeric",withTime:!0}),value:e.createdAt,dataType:"date",dashEmpty:!0},{td:(0,w.Yq)(e.updatedAt,{variant:"numeric",withTime:!0,dashEmpty:!0}),value:e.updatedAt,dataType:"date"},{td:(0,w.Yq)(e.deletedAt,{variant:"numeric",withTime:!0,dashEmpty:!0}),value:e.deletedAt,dataType:"date"},{td:(0,w.Yq)(e.user.deactiveAt,{variant:"numeric",withTime:!0,dashEmpty:!0}),value:e.user.deactiveAt,dataType:"date"}]})),rowOptions:[e=>({override:(0,r.jsx)(V,{activateAccountIds:[e.data.id],disabled:"2"==e.data.user.accountStatus,routeTitle:s})}),e=>({override:(0,r.jsx)(B,{deactivateAccountIds:[e.data.id],disabled:"2"!=e.data.user.accountStatus,routeTitle:s})})],batchOptions:[(e,t)=>{let{clearSelectedRows:a}=t;return{override:(0,r.jsx)(V,{activateAccountIds:e,clearSelectedRows:a,disabled:(0,C.VP)(e)||(null==y?void 0:y.filter(t=>e.includes(t.id)).some(e=>"2"==e.user.accountStatus)),routeTitle:s})}},(e,t)=>{let{clearSelectedRows:a}=t;return{override:(0,r.jsx)(B,{deactivateAccountIds:e,clearSelectedRows:a,disabled:(0,C.VP)(e)||(null==y?void 0:y.filter(t=>e.includes(t.id)).some(e=>"2"!=e.user.accountStatus)),routeTitle:s})}}]},O={loading:(0,r.jsx)(x.Q,{}),error:(0,r.jsx)(g.A,{onRetry:P}),empty:(0,r.jsx)(m.A,{}),loaded:"table"===d?(0,r.jsx)(h.b,{headers:N.headers,rows:N.rows,rowOptions:N.rowOptions,batchOptions:N.batchOptions,limit:S,setLimit:T,page:_,setPage:E,totalPage:null==M||null==(t=M.meta)?void 0:t.last_page}):(0,r.jsx)(u.z,{data:y,dataProps:N,limit:S,setLimit:T,page:_,setPage:E,totalPage:null==M||null==(a=M.meta)?void 0:a.last_page,renderItem:e=>{var t,a,i,n;let{item:d,row:c,details:u,selectedRows:h,toggleRowSelection:m}=e;return(0,r.jsx)(v.G,{item:{id:d.id,showImg:!0,img:(0,R.JU)(null==(a=d.user.photoProfile)||null==(t=a[0])?void 0:t.filePath),imgFallbackSrc:"".concat(b.CS,"/no-avatar.svg"),title:(0,r.jsxs)(I.z,{children:[(0,r.jsx)(l.P,{fontWeight:"semibold",lineClamp:1,children:null==d||null==(i=d.user)?void 0:i.name}),(0,r.jsx)(o.u,{accountStatusId:d.user.accountStatus,pos:"absolute",top:2,left:2})]}),description:null==d||null==(n=d.user)?void 0:n.email},dataProps:N,row:c,selectedRows:h,toggleRowSelection:m,routeTitle:s,details:u},d.id)}})};return(0,r.jsxs)(r.Fragment,{children:[f&&O.loading,!f&&(0,r.jsxs)(r.Fragment,{children:[c&&O.error,!c&&(0,r.jsxs)(r.Fragment,{children:[y&&O.loaded,(!y||(0,C.VP)(y))&&O.empty]})]})]})};function q(){let{l:e}=(0,A.A)(),t=(0,N.usePathname)(),a=(0,R.xD)(t),i=(0,T.Ds)(e,(0,C.HV)(a).labelKey),[l,s]=(0,O.useState)({search:""});return(0,r.jsx)(f.L,{children:(0,r.jsxs)(f.T,{children:[(0,r.jsx)(L,{filter:l,setFilter:s,routeTitle:i}),(0,r.jsx)(Z,{filter:l,routeTitle:i})]})})}},99419:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(30313).A)("outline","activity","Activity",[["path",{d:"M3 12h4l3 8l4 -16l3 8h4",key:"svg-0"}]])}},e=>{e.O(0,[7596,586,9964,9320,1668,9595,6524,358,5246,6351,9872,7368,3783,4289,1372,8832,819,5478,456,6776,8441,4696,7358],()=>e(e.s=92980)),_N_E=e.O()}]);
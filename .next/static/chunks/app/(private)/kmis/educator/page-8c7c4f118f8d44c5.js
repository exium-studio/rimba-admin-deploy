(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5268],{19102:(e,t,a)=>{Promise.resolve().then(a.bind(a,44773))},38752:(e,t,a)=>{"use strict";a.d(t,{X:()=>u});var l=a(95155),i=a(85897),n=a(25535),s=a(58226),r=a(85775),c=a(11698),o=a(7791),d=a(76150);let u=e=>{var t,a,u,m;let{user:h,...x}=e;return(0,l.jsxs)(d.z,{gap:3,...x,children:[(0,l.jsx)(r.E,{id:"avatar-".concat(h.id),src:(0,o.JU)(null==h||null==(a=h.photoProfile)||null==(t=a[0])?void 0:t.filePath),fallbackSrc:"".concat(c.CS,"/no-avatar.svg"),children:(0,l.jsx)(i.e,{src:(0,o.JU)(null==h||null==(m=h.photoProfile)||null==(u=m[0])?void 0:u.filePath),name:h.name,size:"sm"})}),(0,l.jsxs)(n.T,{children:[(0,l.jsx)(s.P,{lineHeight:1.2,children:h.name}),(0,l.jsx)(s.P,{fontSize:"sm",color:"fg.subtle",children:null==h?void 0:h.email})]})]})}},44773:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>es});var l=a(95155),i=a(46426),n=a(66825),s=a(95145),r=a(98886),c=a(35891),o=a(58226),d=a(571),u=a(40814),m=a(46767),h=a(82067),x=a(80192),j=a(86430),v=a(98064),p=a(63041),g=a(48930),f=a(50588),b=a(77141),A=a(38752),S=a(65609),P=a(70637),T=a(11698),w=a(3455),y=a(36780),_=a(93885),C=a(93454),k=a(3370),R=a(35189),E=a(50572),I=a(40773),V=a(60439),z=a(32309),F=a(96307),D=a(46977),H=a(2431),q=a(7791),O=a(50857),Y=a(92091),L=a(45554),Z=a(76150),M=a(89712),X=a(62251),K=a(99419),Q=a(2186),B=a(41521),G=a(20063),J=a(12115),N=a(35068);let U="/api/kmis/educator",W="kmis_educator",$=e=>{let{children:t,content:a,...i}=e;return(0,l.jsx)(m.m,{content:a,positioning:{placement:"right"},...i,children:t})},ee=e=>{let t="".concat(W,"_create"),{routeTitle:a}=e,{l:c}=(0,y.A)(),{themeConfig:o}=(0,C.p)(),d=(0,_.A)(e=>e.setRt),h=(0,E.Q)(),{open:x,onOpen:j,onClose:v}=(0,O.j)();(0,k.A)((0,F.t6)(t),x,j,v);let{req:p,loading:g}=(0,I.A)({id:t,loadingMessage:{title:(0,H.ZH)("".concat(c.add," ").concat(a))},successMessage:{title:(0,H.ZH)("".concat(c.add," ").concat(a," ").concat(c.successful))}}),f=(0,B.Wx)({validateOnChange:!1,initialValues:{name:"",email:"",accountStatus:!1},validationSchema:N.Ik().shape({name:N.Yj().required(c.msg_required_form),email:N.Yj().required(c.msg_required_form)}),onSubmit:e=>{(0,z.aX)();let t=new FormData;t.append("name",e.name),t.append("email",e.email),p({config:{url:"".concat(U,"/create"),method:"POST",data:t},onResolve:{onSuccess:()=>{d(e=>!e)}}})}});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m.m,{content:"".concat(c.add," data"),children:(0,l.jsxs)(i.t,{iconButton:!!h,size:"md",pl:h?"":3,colorPalette:o.colorPalette,onClick:j,children:[(0,l.jsx)(Y.I,{children:(0,l.jsx)(M.A,{stroke:1.5})}),!h&&c.add]})}),(0,l.jsx)(n.i0,{open:x,lazyLoad:!0,size:"xs",children:(0,l.jsxs)(n.L7,{children:[(0,l.jsx)(n.$Z,{children:(0,l.jsx)(s.G,{title:"".concat(c.add," ").concat(a)})}),(0,l.jsx)(n.Ql,{children:(0,l.jsx)("form",{id:t,onSubmit:f.handleSubmit,children:(0,l.jsxs)(L.Rs,{disabled:g,children:[(0,l.jsx)(r.D,{label:c.name,invalid:!!f.errors.name,errorText:f.errors.name,children:(0,l.jsx)(u.Y,{inputValue:f.values.name,onChange:e=>{f.setFieldValue("name",e)}})}),(0,l.jsx)(r.D,{label:"Email",invalid:!!f.errors.email,errorText:f.errors.email,children:(0,l.jsx)(u.Y,{inputValue:f.values.email,onChange:e=>{f.setFieldValue("email",e)}})})]})})}),(0,l.jsx)(n.PK,{children:(0,l.jsx)(i.t,{type:"submit",form:t,colorPalette:o.colorPalette,loading:g,children:c.add})})]})})]})},et=e=>{let{filter:t,setFilter:a,routeTitle:i,...n}=e;return(0,l.jsxs)(Z.z,{p:3,...n,children:[(0,l.jsx)(d.A,{inputValue:t.search,onChange:e=>{a({...t,search:e})}}),(0,l.jsx)(j.F,{navKey:W}),(0,l.jsx)(ee,{routeTitle:i})]})},ea=e=>{let t="".concat(W,"_update"),{data:a,routeTitle:o}=e,{l:d}=(0,y.A)(),{themeConfig:m}=(0,C.p)(),h=(0,_.A)(e=>e.setRt),{open:x,onOpen:j,onClose:v}=(0,O.j)();(0,k.A)((0,F.t6)("".concat(t,"-").concat(null==a?void 0:a.id)),x,j,v);let{req:p,loading:g}=(0,I.A)({id:t,loadingMessage:{title:(0,H.ZH)("Edit ".concat(o))},successMessage:{title:(0,H.ZH)("Edit ".concat(o," ").concat(d.successful))}}),f=(0,B.Wx)({validateOnChange:!1,initialValues:{name:"",email:""},validationSchema:N.Ik().shape({name:N.Yj().required(d.msg_required_form),email:N.Yj().required(d.msg_required_form)}),onSubmit:e=>{var t;(0,z.aX)();let l=new FormData;l.append("name",e.name),l.append("email",e.email),l.append("accountStatus","".concat(null==a||null==(t=a.user)?void 0:t.accountStatus)),p({config:{url:"".concat(U,"/update/").concat(a.id),method:"PATCH",data:l},onResolve:{onSuccess:()=>{h(e=>!e)}}})}});return(0,J.useEffect)(()=>{f.setValues({name:a.user.name,email:a.user.email})},[x,a]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)($,{content:"Edit",children:(0,l.jsxs)(c.Dr,{value:"edit",onClick:j,children:["Edit",(0,l.jsx)(Y.I,{boxSize:"18px",ml:"auto",children:(0,l.jsx)(X.A,{stroke:1.5})})]})}),(0,l.jsx)(n.i0,{open:x,lazyLoad:!0,size:"xs",children:(0,l.jsxs)(n.L7,{children:[(0,l.jsx)(n.$Z,{children:(0,l.jsx)(s.G,{title:"Edit ".concat(o)})}),(0,l.jsx)(n.Ql,{children:(0,l.jsx)("form",{id:t,onSubmit:f.handleSubmit,children:(0,l.jsxs)(L.Rs,{disabled:g,children:[(0,l.jsx)(r.D,{label:d.name,invalid:!!f.errors.name,errorText:f.errors.name,children:(0,l.jsx)(u.Y,{inputValue:f.values.name,onChange:e=>{f.setFieldValue("name",e)}})}),(0,l.jsx)(r.D,{label:"Email",invalid:!!f.errors.email,errorText:f.errors.email,children:(0,l.jsx)(u.Y,{inputValue:f.values.email,onChange:e=>{f.setFieldValue("email",e)}})})]})})}),(0,l.jsx)(n.PK,{children:(0,l.jsx)(i.t,{type:"submit",form:t,colorPalette:m.colorPalette,loading:g,children:d.save})})]})})]})},el=e=>{let t="".concat(W,"_activate"),{activateAccountIds:a,clearSelectedRows:i,disabled:n,routeTitle:s}=e,{l:r}=(0,y.A)(),o=(0,_.A)(e=>e.setRt),{req:d,loading:u}=(0,I.A)({id:t,loadingMessage:{title:(0,H.ZH)("".concat(r.activate," ").concat(s))},successMessage:{title:(0,H.ZH)("".concat(r.activate," ").concat(s," ").concat(r.successful))}});return(0,l.jsx)(x.H,{w:"full",id:"".concat(t,"-").concat(a),title:"".concat(r.activate," ").concat(s),description:r.msg_activate,confirmLabel:"".concat(r.activate),onConfirm:function(){(0,z.aX)(),d({config:{url:"".concat(U,"/activate"),method:"PATCH",data:{activateAccountIds:a}},onResolve:{onSuccess:()=>{o(e=>!e),null==i||i()}}})},loading:u,disabled:n,children:(0,l.jsx)($,{content:r.activate,children:(0,l.jsxs)(c.Dr,{value:"activate",disabled:n,children:[r.activate,(0,l.jsx)(Y.I,{boxSize:"18px",ml:"auto",children:(0,l.jsx)(K.A,{stroke:1.5})})]})})})},ei=e=>{let t="".concat(W,"_deactivate"),{deactivateAccountIds:a,clearSelectedRows:i,disabled:n,routeTitle:s}=e,{l:r}=(0,y.A)(),o=(0,_.A)(e=>e.setRt),{req:d,loading:u}=(0,I.A)({id:t,loadingMessage:{title:(0,H.ZH)("".concat(r.deactivate," ").concat(s))},successMessage:{title:(0,H.ZH)("".concat(r.deactivate," ").concat(s," ").concat(r.successful))}});return(0,l.jsx)(x.H,{w:"full",id:"".concat(t,"-").concat(a),title:"".concat(r.deactivate," ").concat(s),description:r.msg_deactivate,confirmLabel:"".concat(r.deactivate),onConfirm:function(){(0,z.aX)(),d({config:{url:"".concat(U,"/deactivate"),method:"PATCH",data:{deactivateAccountIds:a}},onResolve:{onSuccess:()=>{o(e=>!e),null==i||i()}}})},confirmButtonProps:{color:"fg.error",colorPalette:"gray",variant:"outline"},loading:u,disabled:n,children:(0,l.jsx)($,{content:r.deactivate,children:(0,l.jsxs)(c.Dr,{value:"dactivate",color:"fg.error",disabled:n,children:[r.deactivate,(0,l.jsx)(Y.I,{boxSize:"18px",ml:"auto",children:(0,l.jsx)(Q.A,{stroke:1.5})})]})})})},en=e=>{var t,a;let{filter:i,routeTitle:n}=e,{l:s}=(0,y.A)(),r=(0,w.a)(e=>e.getDisplay(W)),{error:c,initialLoading:d,data:u,onRetry:m,limit:x,setLimit:j,page:S,setPage:_,pagination:C}=(0,R.A)({initialData:void 0,url:"".concat(U,"/index"),params:i,dependencies:[i]}),k={headers:[{th:s.educator,sortable:!0},{th:s.account_status,sortable:!0},{th:s.private_navs.kmis.material,sortable:!0},{th:s.added,sortable:!0},{th:s.updated,sortable:!0},{th:s.deleted,sortable:!0},{th:s.deactivated,sortable:!0}],rows:null==u?void 0:u.map((e,t)=>({id:e.id,idx:t,data:e,dim:!!e.deletedAt,columns:[{td:(0,l.jsx)(A.X,{user:e.user}),value:e.user.name},{td:(0,l.jsx)(h.u,{accountStatusId:e.user.accountStatus}),value:e.user.accountStatus,align:"center",dataType:"number"},{td:(0,D.ZV)(e.totalMaterial),value:e.totalMaterial,dataType:"number",align:"center"},{td:(0,D.Yq)(e.createdAt,{variant:"numeric",withTime:!0}),value:e.createdAt,dataType:"date",dashEmpty:!0},{td:(0,D.Yq)(e.updatedAt,{variant:"numeric",withTime:!0,dashEmpty:!0}),value:e.updatedAt,dataType:"date"},{td:(0,D.Yq)(e.deletedAt,{variant:"numeric",withTime:!0,dashEmpty:!0}),value:e.deletedAt,dataType:"date"},{td:(0,D.Yq)(e.user.deactiveAt,{variant:"numeric",withTime:!0,dashEmpty:!0}),value:e.user.deactiveAt,dataType:"date"}]})),rowOptions:[e=>({override:(0,l.jsx)(ea,{data:e.data,routeTitle:n})}),e=>({override:(0,l.jsx)(el,{activateAccountIds:[e.data.id],disabled:"2"==e.data.user.accountStatus,routeTitle:n})}),e=>({override:(0,l.jsx)(ei,{deactivateAccountIds:[e.data.id],disabled:"2"!=e.data.user.accountStatus,routeTitle:n})})],batchOptions:[(e,t)=>{let{clearSelectedRows:a}=t;return{override:(0,l.jsx)(el,{activateAccountIds:e,clearSelectedRows:a,disabled:(0,V.VP)(e)||(null==u?void 0:u.filter(t=>e.includes(t.id)).some(e=>"2"==e.user.accountStatus)),routeTitle:n})}},(e,t)=>{let{clearSelectedRows:a}=t;return{override:(0,l.jsx)(ei,{deactivateAccountIds:e,clearSelectedRows:a,disabled:(0,V.VP)(e)||(null==u?void 0:u.filter(t=>e.includes(t.id)).some(e=>"2"!=e.user.accountStatus)),routeTitle:n})}}]},E={loading:(0,l.jsx)(P.Q,{}),error:(0,l.jsx)(b.A,{onRetry:m}),empty:(0,l.jsx)(f.A,{}),loaded:"table"===r?(0,l.jsx)(g.b,{headers:k.headers,rows:k.rows,rowOptions:k.rowOptions,batchOptions:k.batchOptions,limit:x,setLimit:j,page:S,setPage:_,totalPage:null==C||null==(t=C.meta)?void 0:t.last_page}):(0,l.jsx)(v.z,{data:u,dataProps:k,limit:x,setLimit:j,page:S,setPage:_,totalPage:null==C||null==(a=C.meta)?void 0:a.last_page,renderItem:e=>{var t,a,i,s;let{item:r,row:c,details:d,selectedRows:u,toggleRowSelection:m}=e;return(0,l.jsx)(p.G,{item:{id:r.id,showImg:!0,img:(0,q.JU)(null==(a=r.user.photoProfile)||null==(t=a[0])?void 0:t.filePath),imgFallbackSrc:"".concat(T.CS,"/no-avatar.svg"),title:(0,l.jsxs)(Z.z,{children:[(0,l.jsx)(o.P,{fontWeight:"semibold",lineClamp:1,children:null==r||null==(i=r.user)?void 0:i.name}),(0,l.jsx)(h.u,{accountStatusId:r.user.accountStatus,pos:"absolute",top:2,left:2})]}),description:null==r||null==(s=r.user)?void 0:s.email},dataProps:k,row:c,selectedRows:u,toggleRowSelection:m,routeTitle:n,details:d},r.id)}})};return(0,l.jsxs)(l.Fragment,{children:[d&&E.loading,!d&&(0,l.jsxs)(l.Fragment,{children:[c&&E.error,!c&&(0,l.jsxs)(l.Fragment,{children:[u&&E.loaded,(!u||(0,V.VP)(u))&&E.empty]})]})]})};function es(){let{l:e}=(0,y.A)(),t=(0,G.usePathname)(),a=(0,q.xD)(t),i=(0,H.Ds)(e,(0,V.HV)(a).labelKey),[n,s]=(0,J.useState)({search:""});return(0,l.jsx)(S.L,{children:(0,l.jsxs)(S.T,{children:[(0,l.jsx)(et,{filter:n,setFilter:s,routeTitle:i}),(0,l.jsx)(en,{filter:n,routeTitle:i})]})})}},82067:(e,t,a)=>{"use strict";a.d(t,{u:()=>s});var l=a(95155),i=a(36780),n=a(54515);let s=e=>{let{accountStatusId:t,...a}=e,{l:s}=(0,i.A)(),r={1:{label:s.inactive,colorPalette:"gray"},2:{label:s.active,colorPalette:"green"},3:{label:s.deactivated,colorPalette:"red"}};return(0,l.jsx)(n.Ex,{colorPalette:r[t].colorPalette,justifyContent:"center",w:"76px",...a,children:r[t].label})}},85897:(e,t,a)=>{"use strict";a.d(t,{e:()=>s});var l=a(95155),i=a(91980),n=a(12115);let s=(0,n.forwardRef)(function(e,t){let{name:a,src:n,srcSet:s,loading:c,icon:o,fallback:d,children:u,...m}=e;return(0,l.jsxs)(i.Cy,{ref:t,...m,children:[(0,l.jsx)(r,{name:a,icon:o,children:d}),(0,l.jsx)(i.BK,{src:n,srcSet:s,loading:c}),u]})}),r=(0,n.forwardRef)(function(e,t){let{name:a,icon:n,children:s,...r}=e;return(0,l.jsxs)(i.q5,{ref:t,...r,children:[s,null!=a&&null==s&&(0,l.jsx)(l.Fragment,{children:function(e){let t=e.trim().split(" "),a=null!=t[0]?t[0]:"",l=t.length>1?t[t.length-1]:"";return a&&l?"".concat(a.charAt(0)).concat(l.charAt(0)):a.charAt(0)}(a)}),null==a&&null==s&&(0,l.jsx)(i.hS,{asChild:!!n,children:n})]})})},86430:(e,t,a)=>{"use strict";a.d(t,{F:()=>d});var l=a(95155),i=a(46426),n=a(92091),s=a(57514),r=a(38582),c=a(50572),o=a(3455);function d(e){let{navKey:t}=e,a=(0,o.a)(e=>e.displays),d=(0,o.a)(e=>e.setDisplay),u=(0,c.Q)(),m="table"===(a[t]||"table");return(0,l.jsxs)(i.t,{iconButton:u,size:"md",w:u?void 0:"100px",variant:"outline",onClick:()=>d(t,m?"grid":"table"),children:[(0,l.jsx)(n.I,{children:m?(0,l.jsx)(s.A,{stroke:1.5}):(0,l.jsx)(r.A,{stroke:1.5})}),!u&&(m?"Table":"Grid")]})}},98886:(e,t,a)=>{"use strict";a.d(t,{D:()=>r});var l=a(95155),i=a(36780),n=a(14200),s=a(54515);let r=(0,a(12115).forwardRef)(function(e,t){let{label:a,children:r,helperText:c,errorText:o,optionalText:d,optional:u,...m}=e,{l:h}=(0,i.A)();return(0,l.jsxs)(n.XO,{ref:t,gap:2,...m,children:[a&&(0,l.jsxs)(n.dh,{fontSize:"md",children:[a,u&&(0,l.jsx)(s.Ex,{colorScheme:"gray",color:"fg.muted",children:h.optional.toLocaleLowerCase()}),(0,l.jsx)(n.tR,{fallback:d})]}),r,c&&(0,l.jsx)(n.sp,{children:c}),o&&(0,l.jsx)(n.wp,{children:o})]})})}},e=>{e.O(0,[7596,586,9964,9320,1668,9595,6524,358,5246,6351,9872,7368,5309,3783,4289,1372,1420,8832,819,5478,456,6776,8441,4696,7358],()=>e(e.s=19102)),_N_E=e.O()}]);